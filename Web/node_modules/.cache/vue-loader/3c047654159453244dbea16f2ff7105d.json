{"remainingRequest":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/javi/Escritorio/TFG - Web/tfg-web/src/components/maps/MapGaraje.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/src/components/maps/MapGaraje.vue","mtime":1578833924215},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport mapboxgl from 'mapbox-gl'\n\nvar map = null\n\nexport default {\n    props: ['organization'],\n\n    mounted() {\n        mapboxgl.accessToken = 'pk.eyJ1IjoicHJ1ZWJhMSIsImEiOiJjazFpNm1kNDAwMzJhM2ltbmRwcXJxbzUyIn0.xp_6hLfEEPqJsPfQA4pmNg';\n        map = new mapboxgl.Map({\n            container: 'map', \n            style: 'mapbox://styles/mapbox/streets-v11', \n            center: this.organization.coordenates, \n            zoom: 9 \n        });\n        \n        const popup = this.creatingPopup()\n        this.garajeDoor = new mapboxgl.Marker().setLngLat(this.organization.coordenates).setPopup(popup).addTo(map)\n        this.addControlToMap()\n        \n        /**\n         * Listener to click event.\n         * Only allows one marker in the map. \n         * If there is a marker in the map and user clicks in map => The first marker will be removed \n         * and the second one will be added.\n         */\n        map.on('click', function(event){\n            if(!this.garajeDoor){                    \n                //this.garajeDoor = new mapboxgl.Marker().setLngLat(event.lngLat).addTo(map)\n            }else {\n                // this.garajeDoor.remove()\n                // this.garajeDoor = new mapboxgl.Marker().setLngLat(event.lngLat).addTo(map)\n            }\n        });  \n    },\n\n    methods: {\n        creatingPopup(){\n            // create the popup\n            var popup = new mapboxgl.Popup({ offset: 25 }).setText(\n                this.organization.name + \"'s garaje is here.\"\n            );\n            \n            // create DOM element for the marker\n            var el = document.createElement('div');\n            el.id = 'marker';\n            return popup\n        },\n\n        addControlToMap(){\n            map.addControl(\n                new mapboxgl.GeolocateControl({\n                    positionOptions: {\n                        enableHighAccuracy: true\n                    },\n                    trackUserLocation: true\n                }),\n            );\n\n            // Add zoom and rotation controls to the map.\n            map.addControl(new mapboxgl.NavigationControl());\n        }\n\n    },\n\n}\n\n",{"version":3,"sources":["MapGaraje.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA","file":"MapGaraje.vue","sourceRoot":"src/components/maps","sourcesContent":["<template>\n    <div>\n        <script type=\"application/javascript\" src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js'></script>\n        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css' rel='stylesheet' />\n        \n        <!-- <div id='map' @click=\"updatedMarker\"></div> -->\n        <div id='map'></div>\n    </div>\n</template>\n\n\n<script>\n    import mapboxgl from 'mapbox-gl'\n\n    var map = null\n\n    export default {\n        props: ['organization'],\n\n        mounted() {\n            mapboxgl.accessToken = 'pk.eyJ1IjoicHJ1ZWJhMSIsImEiOiJjazFpNm1kNDAwMzJhM2ltbmRwcXJxbzUyIn0.xp_6hLfEEPqJsPfQA4pmNg';\n            map = new mapboxgl.Map({\n                container: 'map', \n                style: 'mapbox://styles/mapbox/streets-v11', \n                center: this.organization.coordenates, \n                zoom: 9 \n            });\n            \n            const popup = this.creatingPopup()\n            this.garajeDoor = new mapboxgl.Marker().setLngLat(this.organization.coordenates).setPopup(popup).addTo(map)\n            this.addControlToMap()\n            \n            /**\n             * Listener to click event.\n             * Only allows one marker in the map. \n             * If there is a marker in the map and user clicks in map => The first marker will be removed \n             * and the second one will be added.\n             */\n            map.on('click', function(event){\n                if(!this.garajeDoor){                    \n                    //this.garajeDoor = new mapboxgl.Marker().setLngLat(event.lngLat).addTo(map)\n                }else {\n                    // this.garajeDoor.remove()\n                    // this.garajeDoor = new mapboxgl.Marker().setLngLat(event.lngLat).addTo(map)\n                }\n            });  \n        },\n\n        methods: {\n            creatingPopup(){\n                // create the popup\n                var popup = new mapboxgl.Popup({ offset: 25 }).setText(\n                    this.organization.name + \"'s garaje is here.\"\n                );\n                \n                // create DOM element for the marker\n                var el = document.createElement('div');\n                el.id = 'marker';\n                return popup\n            },\n\n            addControlToMap(){\n                map.addControl(\n                    new mapboxgl.GeolocateControl({\n                        positionOptions: {\n                            enableHighAccuracy: true\n                        },\n                        trackUserLocation: true\n                    }),\n                );\n\n                // Add zoom and rotation controls to the map.\n                map.addControl(new mapboxgl.NavigationControl());\n            }\n\n        },\n\n    }\n\n</script>\n\n<style scoped>\n    #map { \n        width:95%; \n        height: 300px;\n    }\n</style>\n\n"]}]}