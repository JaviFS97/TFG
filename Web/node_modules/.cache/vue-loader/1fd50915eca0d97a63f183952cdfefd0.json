{"remainingRequest":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/javi/Escritorio/TFG - Web/tfg-web/src/views/users/register/Register.vue?vue&type=style&index=0&id=24880f17&scoped=true&lang=css&","dependencies":[{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/src/views/users/register/Register.vue","mtime":1571685780346},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/javi/Escritorio/TFG - Web/tfg-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.stepper{\n    min-height: 700px;\n}\n\n\n.form-btn{\n    width: 25%;\n    max-width: 150px;\n    min-width: 75px;\n}\n\n.form-card{\n    width: 80%;\n    min-width: 250px;\n}\n",{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiSA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views/users/register","sourcesContent":["<template>\n    <v-container fill-height>\n        <v-row justify=\"center\">\n            <v-col xs=\"10\" md=\"8\">\n                <v-stepper v-model=\"view\" class=\"stepper\" alt-labels>\n\n                    <v-stepper-header>\n                        <v-stepper-step :complete=\"view > 1\" step=\"1\">\n                            Select your role.\n                        </v-stepper-step>\n\n                        <v-divider></v-divider>\n\n                        <v-stepper-step step=\"2\">\n                            Register.\n                        </v-stepper-step>\n                    </v-stepper-header>\n                    \n                    <v-stepper-items>\n                        <v-stepper-content step=\"1\">\n                            <v-row justify=\"center\">\n                                <v-card v-if=\"view == 1\" class=\"form-card mb-4\" flat>\n                                                    \n                                    <v-app-bar color=\"primary\" dark>\n                                        <v-row justify=\"center\">\n                                            <h1>Select your role.</h1> \n                                        </v-row>\n                                    </v-app-bar>                    \n\n                                    <v-card-text>\n                                        <v-text-field label=\"Email\"\n                                            outlined prepend-inner-icon=\"mdi-at\"\n                                            v-model=\"generalForm.email\"\n                                            :error-messages=\"emailError\"\n                                            @blur=\"$v.generalForm.email.$touch()\">\n                                        </v-text-field>\n                                        <v-text-field label=\"Password\" \n                                            :type=\"showFirstPassword ? 'text' : 'password'\" \n                                            outlined \n                                            prepend-inner-icon=\"mdi-textbox-password\" \n                                            :append-icon=\"showFirstPassword ? 'mdi-eye' : 'mdi-eye-off'\"  \n                                            @click:append=\"showFirstPassword = !showFirstPassword\"\n                                            v-model=\"generalForm.password\"\n                                            :error-messages=\"passwordError\"\n                                            @blur=\"$v.generalForm.password.$touch()\"\n                                            >\n                                        </v-text-field>\n                                        <v-text-field label=\"Repeat password\" \n                                            :type=\"showSecondPassword ? 'text' : 'password'\" \n                                            outlined \n                                            prepend-inner-icon=\"mdi-lock-reset\" \n                                            :append-icon=\"showSecondPassword ? 'mdi-eye' : 'mdi-eye-off'\"  \n                                            @click:append=\"showSecondPassword = !showSecondPassword\"\n                                            v-model=\"generalForm.repeatPassword\"\n                                            :error-messages=\"repeatPasswordError\"\n                                            @blur=\"$v.generalForm.repeatPassword.$touch()\"                                            \n                                            >\n                                        </v-text-field>\n                                    </v-card-text>\n\n                                    <v-card-actions>\n                                        <v-row justify=\"center\">\n                                            <v-radio-group v-model=\"generalForm.accountType\" row :error-messages=\"accountTypeError\" @blur=\"$v.generalForm.accountType.$touch()\"  >                            \n                                                <v-radio label=\"Personal\" value=\"Personal\" color=\"primary\"></v-radio>\n                                                <v-radio label=\"Organization\" value=\"Organization\" color=\"primary\"></v-radio>\n                                            </v-radio-group>\n                                        </v-row>\n                                    </v-card-actions>\n\n                                    <v-card-actions>            \n                                        <v-row justify=\"center\">\n                                            <v-btn :to=\"{name:'login'}\" color=\"secondary\" class=\"ma-4 form-btn\" >\n                                                Sign in \n                                            </v-btn>                        \n                                            <v-btn @click=\"nextView()\" color=\"secondary\" class=\"ma-4 form-btn\" >\n                                                NEXT\n                                            </v-btn>      \n                                        </v-row>                                    \n                                    </v-card-actions>\n\n                                </v-card>\n                            </v-row>\n                        </v-stepper-content>\n\n                        <v-stepper-content step=\"2\">\n                            <RegisterPersonal v-if=\" view==2 && generalForm.accountType=='Personal'\"\n                                @beforeViewChield=\"beforeView\"\n                                @registerPersonal=\"register\">\n                            </RegisterPersonal>\n                            <RegisterOrganization v-if=\" view==2 && generalForm.accountType=='Organization'\"\n                                @beforeViewChield=\"beforeView\"\n                                @registerOrganization=\"register\">\n                            </RegisterOrganization>\n                        </v-stepper-content>\n                    </v-stepper-items>\n\n                </v-stepper>\n            </v-col>\n        </v-row>  \n    </v-container>\n</template>\n\n\n<script>\n    // Components\n    import RegisterPersonal from './RegisterPersonal'\n    import RegisterOrganization from './RegisterOrganization'\n\n    // Vuelidate\n    import {required, email, minLength, maxLength, sameAs} from 'vuelidate/lib/validators'\n\n    // Models\n    import personalUser from '../../../models/user/personalUser'\n    import organizationUser from '../../../models/user/organizationUser'\n\n    // Vuex\n    import { mapActions } from 'vuex'\n        \n    export default {\n        components: {\n            RegisterPersonal, \n            RegisterOrganization\n        },\n        data() {\n            return {\n                view: 1,\n                showFirstPassword: false,\n                showSecondPassword: false,\n                generalForm: {\n                    email: '',\n                    password: '',\n                    repeatPassword: '',\n                    accountType: '',\n                }\n            }\n        },\n\n        methods: {\n            /**\n             * Event called by childs.\n             */\n            nextView() {\n                if (this.$v.generalForm.$invalid){\n                    this.$v.generalForm.$touch()\n                }else{\n                    this.view++;\n                }                \n            },\n\n            /**\n             * Event called by childs.\n             */\n            beforeView() {\n                this.view--;\n            },\n\n            ...mapActions('snackbar', ['showNotificationSuccess', 'showNotificationError']),\n\n            async register(formData){               \n                var credentials = null\n                // Adding specific data to the appropiate user.\n                switch(this.generalForm.accountType ){\n                    case 'Personal':\n                        var newPersonalUser = new personalUser({\n                            email: this.generalForm.email,\n                            password: this.generalForm.password,\n                            nick: formData.nick,\n                            name: formData.name,\n                            lastName: formData.lastName,\n                            country: formData.country\n                        })\n                        // Register personal user in Auth Firebase\n                        credentials = await newPersonalUser.createUserAuth()\n\n                        // Register personal user in Database Firebase\n                        try{\n                            await newPersonalUser.newPersonalUserInDatabase(credentials)\n                            //this.$router.push({name: login})\n                            this.showNotificationSuccess({msg: 'Successful register', timeout:4000, axisY: 'top', axisX: 'center'})\n                        }catch(error){\n                             this.showNotificationError({msg: 'An error ocurred during register.', timeout:4000, axisY: 'top', axisX: 'center'})\n                        }      \n\n                        break\n\n                    case 'Organization':\n                        var newOrganizationUser = new organizationUser({\n                            email: this.generalForm.email,\n                            password: this.generalForm.password,\n                            name: formData.name,\n                            parkingSpaces: formData.parkingSpaces,\n                            coordenates: formData.garajeDoorCoordenates,\n                        })\n                        // Register organization user in Auth Firebase\n                        credentials = await newOrganizationUser.createUserAuth()\n\n                        // Register organization user in Database Firebase\n                        try{\n                            await newOrganizationUser.newOrganizationUserInDatabase(credentials)\n                            //this.$router.push({name: login})\n                            this.showNotificationSuccess({msg: 'Successful register', timeout:4000, axisY: 'top', axisX: 'center'})                      \n                        }catch(error){\n                             this.showNotificationError({msg: 'An error ocurred during register.', timeout:4000, axisY: 'top', axisX: 'center'})\n                        }\n                        \n\n                        break\n                }\n\n            }\n\n        },\n\n        validations: {\n            generalForm: {\n                email: {\n                    required,   \n                    email       \n                },\n                password: {\n                    required,\n                    minLength: minLength(6),\n                    maxLength: maxLength(20)\n                },\n                repeatPassword: {\n                    required,\n                    sameAs: sameAs('password')\n                },\n                accountType: {\n                    required,\n                }\n            },\n        },\n\n        computed: {\n            /**\n             * Validations for generalForm fields \n             */  \n            emailError() {\n                let error = []\n                \n                if (!this.$v.generalForm.email.$dirty){ return error }\n                else{\n                    if (!this.$v.generalForm.email.required){ error.push(\"Email required.\")}\n                    if (!this.$v.generalForm.email.email){ error.push(\"Invalid email.\")}\n                    return error\n                }\n\n            },\n            passwordError() {\n                let error = []\n                if (!this.$v.generalForm.password.$dirty){ return error}\n                else{\n                    if (!this.$v.generalForm.password.required){ error.push(\"Password required.\")}\n                    if (!this.$v.generalForm.password.minLength){ error.push(\"Min length 6.\")}\n                    if (!this.$v.generalForm.password.maxLength){ error.push(\"Max length 20.\")}\n                    return error\n                }\n\n            },\n            repeatPasswordError() {\n                let error = []\n                if (!this.$v.generalForm.password.$dirty){ return error}\n                else{\n                    if (!this.$v.generalForm.password.required){ error.push(\"Password required.\")}\n                    if (!this.$v.generalForm.repeatPassword.sameAs){ error.push(\"Passwords must match.\")}\n                    return error                    \n                }\n\n            },\n            accountTypeError() {\n                let error = []\n                if (!this.$v.generalForm.accountType.$dirty){ return error}\n                else{\n                    if (!this.$v.generalForm.accountType.required){ error.push(\"Account type required.\")}\n                    return error                    \n                }\n            }\n\n\n        },\n\n\n    }\n</script>\n\n\n<style scoped > \n\n    .stepper{\n        min-height: 700px;\n    }\n\n\n    .form-btn{\n        width: 25%;\n        max-width: 150px;\n        min-width: 75px;\n    }\n\n    .form-card{\n        width: 80%;\n        min-width: 250px;\n    }\n</style>\n"]}]}