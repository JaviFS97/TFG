(function(e){function t(t){for(var i,o,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},r={app:0},n=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00e2":function(e,t,a){"use strict";var i=a("a1f8"),r=a.n(i);r.a},"029b":function(e,t,a){},"0aa6":function(e,t,a){},"0e0c":function(e,t,a){},"1a07":function(e,t,a){"use strict";var i=a("0e0c"),r=a.n(i);r.a},"1d60":function(e,t,a){},2701:function(e,t,a){"use strict";var i=a("49aa"),r=a.n(i);r.a},"29c4":function(e,t,a){e.exports=a.p+"img/logo.09de0d84.jpg"},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id="4678"},"49aa":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("SideBar"),a("TopBar"),a("PrincipalView"),a("Snackbar")],1)},n=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e.isSmallDevice?i("v-navigation-drawer",{attrs:{app:"",dark:"",color:"primary",bottom:""},model:{value:e.visibleSideBar,callback:function(t){e.visibleSideBar=t},expression:"visibleSideBar"}},[i("v-list-item",{attrs:{"two-line":""}},[i("v-list-item-avatar",{attrs:{color:"white"}},[i("v-img",{attrs:{src:a("29c4"),height:"34",contain:""}})],1),i("v-list-item-title",{staticClass:"title"},[e._v("\n                SmartGaraje\n            ")])],1),i("v-divider",{staticClass:"mx-3 mb-3"}),i("v-list",{attrs:{nav:""}},e._l(e.optionsMenuToShowComputed,(function(t){return i("v-list-item",{key:t.title,attrs:{"active-class":"primary white--text",to:t.to},on:{click:function(a){return e.triggerClick(t.action)}}},[i("v-list-item-icon",[i("v-icon",[e._v(e._s(t.icono))])],1),i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t.titulo))])],1)],1)})),1)],1):i("v-navigation-drawer",{attrs:{app:"",dark:"",color:"primary",bottom:"","mini-variant":e.visibleSideBar,permanent:""},on:{"update:miniVariant":function(t){e.visibleSideBar=t},"update:mini-variant":function(t){e.visibleSideBar=t}},model:{value:e.visibleSideBar,callback:function(t){e.visibleSideBar=t},expression:"visibleSideBar"}},[i("v-list-item",{attrs:{"two-line":""}},[i("v-list-item-avatar",{attrs:{color:"white"}},[i("v-img",{attrs:{src:a("29c4"),height:"34",contain:""}})],1),i("v-list-item-title",{staticClass:"title"},[e._v("\n                SmartGaraje\n            ")])],1),i("v-divider",{staticClass:"mx-3 mb-3"}),i("v-list",{attrs:{nav:""}},e._l(e.optionsMenuToShowComputed,(function(t){return i("v-list-item",{key:t.title,attrs:{"active-class":"primary white--text",to:t.to},on:{click:function(a){return e.triggerClick(t.action)}}},[i("v-list-item-icon",[i("v-icon",[e._v(e._s(t.icono))])],1),i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t.titulo))])],1)],1)})),1)],1)],1)},s=[],c=a("2f62");const l="Personal-User",d="Organization-User",u="User",m="No-User";var p={components:{},data(){return{isSmallDevice:!0,optionsMenu:[{titulo:"Sign In",icono:"mdi-arrow-right-bold-box",to:{name:"login"},activedUser:m,action:"doNothing"},{titulo:"Sign Up",icono:"mdi-account-plus",to:{name:"register"},activedUser:m,action:"doNothing"},{titulo:"Dashboard",icono:"mdi-view-dashboard",to:{name:"dashboard"},activedUser:u,action:"doNothing"},{titulo:"Vehicules",icono:"mdi-car-multiple",to:{name:"vehicules"},activedUser:l,action:"doNothing"},{titulo:"Garages",icono:"mdi-home-city",to:{name:"garaje"},activedUser:l,action:"doNothing"},{titulo:"Manage Org.",icono:"mdi-account-supervisor",to:{name:"ManageCore"},activedUser:d,action:"doNothing"},{titulo:"Sign Out",icono:"mdi-arrow-left-bold-box",activedUser:u,action:"signOut"}]}},created(){window.addEventListener("resize",this.onResize,{passive:!0}),this.onResize()},computed:{visibleSideBar:{get(){return this.$store.state.core.visibleSideBar},set(e){this.isSmallDevice&&this.setVisibleSideBar(e)}},userLogged(){let e=this.$store.state.session.user,t=this.$store.state.session.userType;return e?"personalUser"==t?l:d:m},optionsMenuToShowComputed(){return this.optionsMenuToShowMethod()}},methods:{...Object(c["c"])("core",["setVisibleSideBar"]),optionsMenuToShowMethod(){let e=[];for(let t of this.optionsMenu)t.activedUser==this.userLogged?e.push(t):this.userLogged!=m&&t.activedUser==u&&e.push(t);return e},triggerClick(e){this[e]()},doNothing(){},signOut(){this.$store.dispatch("session/signOut"),this.$router.push({name:"login"})},onResize(){this.isSmallDevice=window.innerWidth<600}}},h=p,v=a("2877"),g=a("6544"),f=a.n(g),b=a("ce7e"),w=a("132d"),y=a("adda"),k=a("8860"),x=a("da13"),V=a("8270"),F=a("5d23"),j=a("34c3"),O=a("f774"),S=Object(v["a"])(h,o,s,!1,null,null,null),_=S.exports;f()(S,{VDivider:b["a"],VIcon:w["a"],VImg:y["a"],VList:k["a"],VListItem:x["a"],VListItemAvatar:V["a"],VListItemContent:F["a"],VListItemIcon:j["a"],VListItemTitle:F["c"],VNavigationDrawer:O["a"]});var C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{color:"transparent",app:"",flat:"",absolute:""}},[a("v-toolbar-title",{staticClass:" font-weight-light tertiary--text"},[e.isResponsive?a("v-btn",{attrs:{icon:""},on:{click:e.sideBarVisible}},[a("v-icon",[e._v("mdi-view-list")])],1):e._e(),e._v("\n\t\t"+e._s(e.currentPageName)+"\n\t")],1),a("v-spacer"),e.userLogged?a("v-toolbar-items",[a("v-row",{attrs:{align:"center"}},[a("v-badge",{staticClass:"mx-2",attrs:{overlap:!0,color:"warning"},scopedSlots:e._u([{key:"badge",fn:function(){return[e._v(" ! ")]},proxy:!0}],null,!1,687693145)},[a("v-icon",[e._v("mdi-bell")])],1),a("v-chip",{staticClass:"mx-4",attrs:{pill:"",outlined:"",color:"primary","text-color":"primary"},on:{click:function(e){}}},[a("v-icon",{staticClass:"mr-1"},[e._v(" mdi-account-circle")]),e._v("\n\t\t\t\t"+e._s(e.userLogged.name)+"\n\t\t\t")],1)],1)],1):e._e()],1)},T=[],R={components:{},data(){return{}},methods:{...Object(c["c"])("core",["setVisibleSideBar"]),sideBarVisible(){let e=this.$store.state.core.visibleSideBar;this.setVisibleSideBar(!e)}},computed:{isResponsive(){return!0},userLogged(){return this.$store.state.session.user},currentPageName(){return this.$store.state.core.topBarName}}},z=R,L=a("40dc"),N=a("4ca6"),E=a("8336"),P=a("cc20"),A=a("0fd9"),$=a("2fa4"),I=a("2a7f"),M=Object(v["a"])(z,C,T,!1,null,null,null),D=M.exports;f()(M,{VAppBar:L["a"],VBadge:N["a"],VBtn:E["a"],VChip:P["a"],VIcon:w["a"],VRow:A["a"],VSpacer:$["a"],VToolbarItems:I["a"],VToolbarTitle:I["b"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",{staticClass:"principalViewStyle"},[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)},U=[],q={components:{},data(){return{}}},G=q,H=(a("5a79"),a("a75b")),Y=a("0789"),J=Object(v["a"])(G,B,U,!1,null,null,null),X=J.exports;f()(J,{VContent:H["a"],VFadeTransition:Y["c"]});var K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-snackbar",{attrs:{color:e.snackbarProperties.color,timeout:e.snackbarProperties.timeout,top:e.positionAxisY("top"),bottom:e.positionAxisY("bottom"),left:e.positionAxisX("left"),center:e.positionAxisX("center"),right:e.positionAxisX("right")},model:{value:e.snackbarProperties.visible,callback:function(t){e.$set(e.snackbarProperties,"visible",t)},expression:"snackbarProperties.visible"}},[e._v("\n            "+e._s(e.snackbarProperties.msg)+"            \n        "),a("v-btn",{attrs:{dark:"",text:""},on:{click:e.closeNotification}},[e._v("\n            Close\n        ")])],1)],1)},W=[],Z={computed:{snackbarProperties(){return this.$store.state.snackbar.snackbarProperties}},methods:{...Object(c["c"])("snackbar",["hideNotification"]),closeNotification(){this.hideNotification()},positionAxisY(e){return e==this.snackbarProperties.axisY},positionAxisX(e){return e==this.snackbarProperties.axisX}}},Q=Z,ee=a("2db4"),te=Object(v["a"])(Q,K,W,!1,null,null,null),ae=te.exports;f()(te,{VBtn:E["a"],VSnackbar:ee["a"]});var ie={name:"App",components:{SideBar:_,TopBar:D,PrincipalView:X,Snackbar:ae},data(){return{}},computed:{}},re=ie,ne=a("7496"),oe=Object(v["a"])(re,r,n,!1,null,null,null),se=oe.exports;f()(oe,{VApp:ne["a"]});var ce=a("8c4f"),le=a("59ca"),de=a.n(le);a("ea7b"),a("e71f"),a("8934"),a("588e");var ue={apiKey:"AIzaSyBsXOd15ZCTsuTvUpqPbrkA6tUfoRJ54Yc",authDomain:"tfg-smartgaraje.firebaseapp.com",databaseURL:"https://tfg-smartgaraje.firebaseio.com",projectId:"tfg-smartgaraje",storageBucket:"tfg-smartgaraje.appspot.com",messagingSenderId:"364683945573",appId:"1:364683945573:web:872aaf59885aa87d5f088c",measurementId:"G-0J0GJ1Z8E4"};de.a.initializeApp(ue);const me=de.a.auth(),pe=de.a.firestore();de.a.storage(),de.a.functions();var he={namespaced:!0,state:{visibleSideBar:!0,topBarName:""},mutations:{setVisibleSideBar(e,t){e.visibleSideBar=t},setTopBarName(e,t){e.topBarName=t}},actions:{}};class ve{constructor(e,t){this.email=e,this.password=t}async createUserAuth(){var e=await me.createUserWithEmailAndPassword(this.email,this.password);return e}async sendEmailVerification(){var e=await me.currentUser.sendEmailVerification();return e}async login(){var e=await me.signInWithEmailAndPassword(this.email,this.password);return e}}class ge{constructor(e,t,a,i,r,n,o,s){this.plate=e,this.name=t,this.type=a,this.brand=i,this.model=r,this.height=n,this.width=o,this.depth=s}async createVehicule(e){await this.existsVehicule(e).then(t=>{let a=pe.batch();return a.set(pe.collection("users").doc(e).collection("vehicules").doc(this.plate),{name:this.name,plate:this.plate,type:this.type,brand:this.brand,model:this.model,height:this.height,width:this.width,depth:this.depth}),a.set(pe.collection("vehicules").doc(this.plate),{uid:e}),a.commit()}).catch(e=>{new Promise(resolve,t=>{t(e)})})}async existsVehicule(e){let t=await pe.collection("vehicules").doc(this.plate).get();return new Promise((a,i)=>{t.exists?(t.data().uid==e&&a("this vehicule it's yours!"),i("vehicules exists!")):a("vehicules not exists!")})}async deleteVehicule(e){console.log(pe.collection("vehicules").doc(this.plate));let t=pe.batch();return t.delete(pe.collection("users").doc(e).collection("vehicules").doc(this.plate)),t.delete(pe.collection("vehicules").doc(this.plate)),t.commit()}}class fe extends ve{constructor({email:e,password:t,name:a,parkingSpaces:i,coordenates:r}){super(e,t),this.name=a,this.parkingSpaces=i,this.coordenates=r}async newOrganizationUserInDatabase(e){this.oid=e.user.uid;let t=pe.batch();t.set(pe.collection("organizations").doc(this.oid),{organizationName:this.name,parkingSpaces:this.parkingSpaces,coordenateLAT:this.coordenates.lat,coordenateLNG:this.coordenates.lng}),t.set(pe.collection("organizationsNames").doc(this.name),{oid:this.oid}),await t.commit()}async getOID(){let e=await pe.collection("organizationsNames").doc(this.name).get();this.oid=e.data().oid}async getOrganizationByOID(e){let t=await pe.collection("organizations").doc(e).get();return t.data()}async getUsersRequest(){this.oid||await this.getOID();let e=[],t=await pe.collection("organizations").doc(this.oid).collection("userRequest").get();return t.forEach(t=>{let a={};a.uid=t.id,e.push(a)}),e}async getNumberOfOccupiedParkingSpaces(){this.oid||await this.getOID();let e=0,t=await pe.collection("organizations").doc(this.oid).collection("members").get();return t.forEach(t=>{e+=Number(t.data().parkingSpaces)}),e}async acceptUserRequest(e,t){this.oid||await this.getOID();let a=pe.batch();a.set(pe.collection("organizations").doc(this.oid).collection("members").doc(e),{parkingSpaces:t}),a.delete(pe.collection("organizations").doc(this.oid).collection("userRequest").doc(e)),a.set(pe.collection("users").doc(e).collection("organizations").doc(this.oid),{requestStatus:"ACCEPTED"});let i=0;while(i<t)a.set(pe.collection("users").doc(e).collection("organizations").doc(this.oid).collection("parkings").doc(this.oid+i.toString()),{title:"Parking "+i.toString()}),i++;await a.commit()}async getMembers(){this.oid||await this.getOID();let e=[],t=await pe.collection("organizations").doc(this.oid).collection("members").get();return t.forEach(t=>{let a={};a.uid=t.id,a.parkingSpaces=Number(t.data().parkingSpaces),e.push(a)}),e}async getTimeLines(){this.oid||await this.getOID();let e=[],t=await pe.collection("organizations").doc(this.oid).collection("timeLine").get();return t.forEach(t=>{let a={};a.date=t.data().date,a.plateURL=t.data().plateURL,a.status=t.data().status,e.push(a)}),console.log(e),e}}class be extends ve{constructor({email:e,password:t,nick:a,name:i,lastName:r,country:n}){super(e,t),this.nick=a,this.name=i,this.lastName=r,this.country=n,this.uid=void 0}async getUID(){let e=await pe.collection("usersNames").doc(this.nick).get();this.uid=e.data().uid}async newPersonalUserInDatabase(e){this.uid=e.user.uid;let t=pe.batch();t.set(pe.collection("users").doc(this.uid),{nick:this.nick,name:this.name,lastName:this.lastName,country:this.country}),t.set(pe.collection("usersNames").doc(this.nick),{uid:this.uid}),await t.commit()}async loadVehicules(){let e=[];this.uid||await this.getUID();let t=await pe.collection("users").doc(this.uid).collection("vehicules").get();return t.forEach(t=>{let a=new ge(t.data().plate,t.data().name,t.data().type,t.data().brand,t.data().model,t.data().height,t.data().width,t.data().depth);e.push(a),console.log(t)}),e}async saveVehicule(e){return this.uid||await this.getUID(),await e.createVehicule(this.uid)}async deleteVehicule(e){return this.uid||await this.getUID(),await e.deleteVehicule(this.uid)}async listenerVehicules(){this.uid||await this.getUID();let e=[];return await pe.collection("users").doc(this.uid).collection("vehicules").onSnapshot(t=>{t.docChanges().forEach(t=>{if("added"===t.type||"modified"===t.type){let a=t.doc.data(),i=new ge(a.plate,a.name,a.type,a.brand,a.model,a.height,a.width,a.depth);e.push(i)}t.type})}),e}async requestInvitation(e){this.uid||await this.getUID();for(const t of e){let e=pe.batch();e.set(pe.collection("users").doc(this.uid).collection("organizations").doc(t.oid),{requestStatus:"SENT"}),e.set(pe.collection("organizations").doc(t.oid).collection("userRequest").doc(this.uid),{}),await e.commit()}}async getOrganizations(){this.uid||await this.getUID();let e=[],t=await pe.collection("users").doc(this.uid).collection("organizations").get();return t.forEach(t=>{const a={};a.oid=t.id,a.requestStatus=t.data().requestStatus,e.push(a)}),e}async getParkingsOfOrganization(e){this.uid||await this.getUID();let t=[],a=await pe.collection("users").doc(this.uid).collection("organizations").doc(e).collection("parkings").get();return a.forEach(e=>{const a={};a.pid=e.id,a.title=e.data().title,t.push(a)}),t}async getPersonalUserByUID(e){let t=await pe.collection("users").doc(e).get();return t.data()}async publishRent(e,t,a,i,r,n){this.uid||await this.getUID();let o=pe.batch();o.set(pe.collection("rentGarajeSpace").doc(e),{uidOwner:this.uid,dates:t,startHour:a,endHour:i,coordenateLAT:r,coordenateLNG:n}),await o.commit()}async getRentList(){this.uid||await this.getUID();let e=[],t=await pe.collection("users").doc(this.uid).collection("parkingsRent").get();return t.forEach(t=>{const a={};a.uidOwner=t.data().uidOwner,a.pid=t.data().pid,e.push(a)}),e}}var we={namespaced:!0,state:{user:null,userType:null},mutations:{updateUser(e,t){e.user=t},updateUserType(e,t){e.userType=t},updateDataUser(e,t){e.user&&(e.user.name=t.name,e.user.lastName=t.lastName)}},actions:{async userIsLogged(e,t){try{let a=await pe.collection("users").doc(t).get();if(a.exists){let t=a.data(),i=new be({nick:t.nick,name:t.name,lastName:t.lastName,country:t.country});e.commit("updateUser",i),e.commit("updateUserType","personalUser")}else{let a=await pe.collection("organizations").doc(t).get();if(a.exists){let t=a.data(),i=new fe({name:t.organizationName,parkingSpaces:t.parkingSpaces,coordenates:{lat:t.coordenateLAT,lng:t.coordenateLNG}});e.commit("updateUser",i),e.commit("updateUserType","organizationUser")}else Wi.push({name:"register"})}}catch(a){}},signOut(e){console.log("sign out"),me.signOut(),e.commit("updateUser",null),e.commit("updateUserType",null)}}},ye={namespaced:!0,state:{snackbarProperties:{visible:!1,color:"",msg:"",timeout:0,axisX:"",axisY:""}},mutations:{showNotification(e,{color:t,msg:a,timeout:i=5e3,axisX:r="center",axisY:n="top"}){e.snackbarProperties.color=t,e.snackbarProperties.msg=a,e.snackbarProperties.timeout=i,e.snackbarProperties.axisX=r,e.snackbarProperties.axisY=n,e.snackbarProperties.visible=!0},hideNotification(e){e.snackbarProperties.visible=!1}},actions:{showNotificationInfo(e,{msg:t,timeout:a,axisX:i,axisY:r}){e.commit("showNotification",{color:"info",msg:t,timeout:a,axisX:i,axisY:r})},showNotificationSuccess(e,{msg:t,timeout:a,axisX:i,axisY:r}){e.commit("showNotification",{color:"success",msg:t,timeout:a,axisX:i,axisY:r})},showNotificationWarning(e,{msg:t,timeout:a,axisX:i,axisY:r}){e.commit("showNotification",{color:"warning",msg:t,timeout:a,axisX:i,axisY:r})},showNotificationError(e,{msg:t,timeout:a,axisX:i,axisY:r}){e.commit("showNotification",{color:"error",msg:t,timeout:a,axisX:i,axisY:r})}}};i["a"].use(c["a"]);var ke=new c["a"].Store({namespaced:!0,modules:{core:he,session:we,snackbar:ye},state:{},mutations:{},actions:{}}),xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[i("v-row",{staticClass:"mb-5",attrs:{justify:"center"}},[i("h1",[e._v("Your vehicules")])]),e.loading?i("v-row",{staticClass:"mt-10",attrs:{justify:"center"}},[i("v-progress-circular",{attrs:{size:75,color:"primary",indeterminate:""}})],1):i("v-row",{attrs:{justify:"center"}},[0==e.listOfVehicules.length?i("img",{attrs:{src:a("9779"),width:"40%",height:"50%",alt:""}}):e._e(),e._l(e.listOfVehicules,(function(t,a){return i("v-col",{key:a,attrs:{cols:"10",sm:"6",md:"4",lg:"3",xl:"2"}},[i("VehiculeCard",{attrs:{vehicule:t},on:{deleteVehicule:e.removeVehiculeCard,modifyVehicule:e.modifyVehiculeCard}})],1)}))],2),i("v-row",{staticClass:"boton-flotante"},[i("v-btn",{staticClass:"mx-8 mt-8",attrs:{fab:"",dark:"",color:"primary"},on:{click:e.enableVehiculeForm}},[i("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1)],1),e.visibleVehiculeForm?i("v-row",[i("VehiculeForm",{attrs:{visibleForm:e.visibleVehiculeForm,vehiculeToModify:e.vehiculeToModify},on:{saveVehicule:e.addVehiculeCard,disabledForm:e.disableVehiculeForm}})],1):e._e()],1)},Ve=[],Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344"}},[a("v-img",{staticClass:"imageBackGround"}),a("v-card-title",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("div",[e._v(" "+e._s(e.vehicule.name)+" ")])]),a("v-row",{attrs:{justify:"center"}},[a("span",{staticClass:"grey--text subtitle-1"},[e._v(" "+e._s(e.vehicule.plate)+" ")])])],1)],1),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.showExpandCard=!e.showExpandCard}}},[a("v-icon",[e._v(e._s(e.showExpandCard?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1),a("v-expand-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showExpandCard,expression:"showExpandCard"}]},[a("v-divider"),a("v-card-text",[a("v-container",[a("v-row",[e._v("\n                        Type: "+e._s(e.vehicule.type)+"\n                    ")]),a("v-row",[e._v("\n                        Brand: "+e._s(e.vehicule.brand)+"\n                    ")]),a("v-row",[e._v("\n                        Model: "+e._s(e.vehicule.model)+"\n                    ")]),a("v-row",{staticClass:"mt-5",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"6",justify:"center"}},[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"error"},on:{click:e.removeVehicule}},[e._v("\n                                    Delete\n                                ")])],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.modifyVehicule}},[e._v("\n                                    Modify\n                                ")])],1)],1)],1)],1)],1)],1)])],1)},je=[],Oe={props:["vehicule"],data:()=>({showExpandCard:!1}),computed:{userLogged(){return this.$store.state.session.user}},methods:{...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),removeVehicule(){this.userLogged.deleteVehicule(this.vehicule).then(e=>{this.showNotificationSuccess({msg:"Vehicule removed!!",timeout:4e3,axisY:"top",axisX:"center"}),this.$emit("deleteVehicule")}).catch(e=>{this.showNotificationError({msg:"An error ocurred during deleting vehicule!!",timeout:4e3,axisY:"top",axisX:"center"})})},modifyVehicule(){this.$emit("modifyVehicule",this.vehicule)}}},Se=Oe,_e=(a("2701"),a("b0af")),Ce=a("99d9"),Te=a("62ad"),Re=a("a523"),ze=Object(v["a"])(Se,Fe,je,!1,null,null,null),Le=ze.exports;f()(ze,{VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCardTitle:Ce["c"],VCol:Te["a"],VContainer:Re["a"],VDivider:b["a"],VExpandTransition:Y["a"],VIcon:w["a"],VImg:y["a"],VRow:A["a"]});var Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.visibleForm,callback:function(t){e.visibleForm=t},expression:"visibleForm"}},[a("v-card",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[e.modifyingVehicule?a("v-card-title",{staticClass:"headline"},[e._v("\n                        Modify vehicule.\n                    ")]):a("v-card-title",{staticClass:"headline"},[e._v("\n                        Add vehicule.\n                    ")])],1),a("v-row",{attrs:{justify:"center"}},[a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{xs:"12"}},[a("v-text-field",{attrs:{disabled:e.modifyingVehicule,label:"License Plate","prepend-inner-icon":"mdi-boom-gate-up",outlined:""},model:{value:e.vehiculeForm.plate,callback:function(t){e.$set(e.vehiculeForm,"plate",t)},expression:"vehiculeForm.plate"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Vehicule Name","prepend-inner-icon":"mdi-format-text",outlined:""},model:{value:e.vehiculeForm.name,callback:function(t){e.$set(e.vehiculeForm,"name",t)},expression:"vehiculeForm.name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-select",{attrs:{label:"Type",items:e.typesVehicules,dense:"",outlined:"","prepend-inner-icon":"mdi-train-car"},model:{value:e.vehiculeForm.type,callback:function(t){e.$set(e.vehiculeForm,"type",t)},expression:"vehiculeForm.type"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Brand","prepend-inner-icon":"mdi-car-multiple",outlined:""},model:{value:e.vehiculeForm.brand,callback:function(t){e.$set(e.vehiculeForm,"brand",t)},expression:"vehiculeForm.brand"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Model","prepend-inner-icon":"mdi-engine",outlined:""},model:{value:e.vehiculeForm.model,callback:function(t){e.$set(e.vehiculeForm,"model",t)},expression:"vehiculeForm.model"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Height","prepend-inner-icon":"mdi-arrow-collapse-vertical",outlined:""},model:{value:e.vehiculeForm.height,callback:function(t){e.$set(e.vehiculeForm,"height",t)},expression:"vehiculeForm.height"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Width","prepend-inner-icon":"mdi-arrow-collapse-horizontal",outlined:""},model:{value:e.vehiculeForm.width,callback:function(t){e.$set(e.vehiculeForm,"width",t)},expression:"vehiculeForm.width"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Depth","prepend-inner-icon":"mdi-arrow-collapse-all",outlined:""},model:{value:e.vehiculeForm.depth,callback:function(t){e.$set(e.vehiculeForm,"depth",t)},expression:"vehiculeForm.depth"}})],1)],1)],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.disabledForm}},[e._v("Close")]),e.modifyingVehicule?a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveVehicule}},[e._v("Modify")]):a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveVehicule}},[e._v("Save")])],1)],1)],1)],1)],1)},Ee=[],Pe=[{name:"Bus"},{name:"Car"},{name:"Van"},{name:"Motorbike"},{name:"Truck"}],Ae={props:["visibleForm","vehiculeToModify"],data(){return{typesVehicules:[],modifyingVehicule:!1,vehiculeForm:{plate:"",name:"",type:"",brand:"",model:"",height:"",width:"",depth:""}}},created(){for(let e of Pe)this.typesVehicules.push(e.name);console.log(this.vehiculeToModify),this.vehiculeToModify&&(this.vehiculeForm.plate=this.vehiculeToModify.plate,this.vehiculeForm.name=this.vehiculeToModify.name,this.vehiculeForm.type=this.vehiculeToModify.type,this.vehiculeForm.brand=this.vehiculeToModify.brand,this.vehiculeForm.model=this.vehiculeToModify.model,this.vehiculeForm.height=this.vehiculeToModify.height,this.vehiculeForm.width=this.vehiculeToModify.width,this.vehiculeForm.depth=this.vehiculeToModify.depth,this.modifyingVehicule=!0)},computed:{userLogged(){return this.$store.state.session.user}},methods:{...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),disabledForm(){this.$emit("disabledForm")},async saveVehicule(){console.log("save");let e=new ge(this.vehiculeForm.plate,this.vehiculeForm.name,this.vehiculeForm.type,this.vehiculeForm.brand,this.vehiculeForm.model,this.vehiculeForm.height,this.vehiculeForm.width,this.vehiculeForm.depth);await this.userLogged.saveVehicule(e).then(t=>{this.vehiculeToModify?this.showNotificationSuccess({msg:"Vehicule modified",timeout:4e3,axisY:"top",axisX:"center"}):this.showNotificationSuccess({msg:"Vehicule added",timeout:4e3,axisY:"top",axisX:"center"}),this.$emit("saveVehicule",e)}).catch(e=>{this.showNotificationError({msg:"Vehicule plate already exists",timeout:4e3,axisY:"top",axisX:"center"})})}}},$e=Ae,Ie=a("169a"),Me=a("b974"),De=a("8654"),Be=Object(v["a"])($e,Ne,Ee,!1,null,null,null),Ue=Be.exports;f()(Be,{VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCardTitle:Ce["c"],VCol:Te["a"],VContainer:Re["a"],VDialog:Ie["a"],VRow:A["a"],VSelect:Me["a"],VSpacer:$["a"],VTextField:De["a"]});var qe={components:{VehiculeCard:Le,VehiculeForm:Ue},data:()=>({i:0,visibleVehiculeForm:!1,listOfVehicules:[],loading:!0,vehiculeToModify:null}),computed:{userLogged(){return this.$store.state.session.user}},async created(){this.setTopBarName("Vehicules"),await this.sleep(1e3),this.listenerVehicules()},methods:{...Object(c["c"])("core",["setTopBarName"]),enableVehiculeForm(){this.visibleVehiculeForm=!0},disableVehiculeForm(){this.visibleVehiculeForm=!1,this.vehiculeToModify=null},addVehiculeCard(){this.listenerVehicules(),this.disableVehiculeForm()},removeVehiculeCard(){this.listenerVehicules()},modifyVehiculeCard(e){this.vehiculeToModify=e,this.enableVehiculeForm()},async listenerVehicules(){this.loading=!0,this.listOfVehicules=await this.userLogged.listenerVehicules(),this.loading=!1},sleep(e){return new Promise(t=>setTimeout(t,e))}}},Ge=qe,He=(a("fbf8"),a("490a")),Ye=Object(v["a"])(Ge,xe,Ve,!1,null,null,null),Je=Ye.exports;f()(Ye,{VBtn:E["a"],VCol:Te["a"],VContainer:Re["a"],VIcon:w["a"],VProgressCircular:He["a"],VRow:A["a"]});var Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",["organizationUser"==e.userType?a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-row",{attrs:{justify:"center"}},[a("h2",{attrs:{id:"title-chart"}},[e._v("Garaje status")]),a("canvas",{attrs:{id:"planet-chart"}})])],1),a("v-col",{attrs:{cols:"6"}},[a("v-timeline",{attrs:{dense:""}},e._l(e.timeLines,(function(t){return a("v-timeline-item",{key:t,attrs:{color:"green lighten-2",small:""}},[a("v-card",{staticClass:"elevation-2"},[a("v-card-title",{staticClass:"headline primary"},["Leave"==t.status?a("h4",{staticClass:"ml-4",staticStyle:{color:"white"}},[e._v("\n                            Leave garaje\n                        ")]):e._e(),"Enter"==t.status?a("h4",{staticClass:"ml-4",staticStyle:{color:"white"}},[e._v("\n                            Enter garaje\n                        ")]):e._e(),"Error"==t.status?a("h4",{staticClass:"ml-4",staticStyle:{color:"white"}},[e._v("\n                            Does not belong to the garage\n                        ")]):e._e()]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("b",[e._v("Date:")]),e._v(" "+e._s(t.date)+"\n                                \n                            ")]),a("v-col",{attrs:{cols:"6"}},[a("img",{attrs:{src:t.plateURL,height:"100%",width:"100%"}})])],1)],1)],1)],1)})),1)],1)],1):e._e()],1)},Ke=[],We=a("30ef"),Ze=a.n(We),Qe={created(){this.setTopBarName("Dashboard"),this.getTimeLines();const e=document.getElementById("planet-chart");new Ze.a(e,{type:"",data:[],options:{}})},data(){return{timeLines:[],planetChartData:{type:"pie",data:{labels:["Free","Occuped"],datasets:[{label:"Number of Moons",data:[4,8],backgroundColor:["rgba(77, 175, 124, 1)","rgba(236, 100, 75, 1)"],borderColor:["#36495d","#36495d"],borderWidth:3}]},options:{responsive:!0}}}},computed:{userLogged(){return this.$store.state.session.user},userType(){return this.$store.state.session.userType}},mounted(){this.createChart("planet-chart",this.planetChartData)},methods:{...Object(c["c"])("core",["setTopBarName"]),async getTimeLines(){await this.userLogged.getTimeLines().then(e=>{for(const t of e)this.timeLines.push({date:this.timeConverter(t.date.seconds),plateURL:t.plateURL,status:t.status})})},timeConverter(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date(1e3*e),i=a.getFullYear(),r=t[a.getMonth()],n=a.getDate(),o=a.getHours(),s="0"+a.getMinutes(),c="0"+a.getSeconds(),l=r+"-"+n+"-"+i+" "+o+":"+s.substr(-2)+":"+c.substr(-2);return l},createChart(e,t){const a=document.getElementById(e);new Ze.a(a,{type:t.type,data:t.data,options:t.options})}}},et=Qe,tt=(a("1a07"),a("8414")),at=a("1e06"),it=Object(v["a"])(et,Xe,Ke,!1,null,null,null),rt=it.exports;f()(it,{VCard:_e["a"],VCardTitle:Ce["c"],VCol:Te["a"],VContainer:Re["a"],VRow:A["a"],VTimeline:tt["a"],VTimelineItem:at["a"]});var nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":""}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{xs:"10",md:"8"}},[a("v-stepper",{staticClass:"stepper",attrs:{"alt-labels":""},model:{value:e.view,callback:function(t){e.view=t},expression:"view"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.view>1,step:"1"}},[e._v("\n                        Select your role.\n                    ")]),a("v-divider"),a("v-stepper-step",{attrs:{step:"2"}},[e._v("\n                        Register.\n                    ")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-row",{attrs:{justify:"center"}},[1==e.view?a("v-card",{staticClass:"form-card mb-4",attrs:{flat:""}},[a("v-app-bar",{attrs:{color:"primary",dark:""}},[a("v-row",{attrs:{justify:"center"}},[a("h1",[e._v("Select your role.")])])],1),a("v-card-text",[a("v-text-field",{attrs:{label:"Email",outlined:"","prepend-inner-icon":"mdi-at","error-messages":e.emailError},on:{blur:function(t){return e.$v.generalForm.email.$touch()}},model:{value:e.generalForm.email,callback:function(t){e.$set(e.generalForm,"email",t)},expression:"generalForm.email"}}),a("v-text-field",{attrs:{label:"Password",type:e.showPassword?"text":"password",outlined:"","prepend-inner-icon":"mdi-textbox-password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off","error-messages":e.passwordError},on:{"click:append":function(t){e.showPassword=!e.showPassword},blur:function(t){return e.$v.generalForm.password.$touch()}},model:{value:e.generalForm.password,callback:function(t){e.$set(e.generalForm,"password",t)},expression:"generalForm.password"}}),a("v-text-field",{attrs:{label:"Repeat password",type:e.showPassword?"text":"password",outlined:"","prepend-inner-icon":"mdi-lock-reset","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off","error-messages":e.repeatPasswordError},on:{"click:append":function(t){e.showPassword=!e.showPassword},blur:function(t){return e.$v.generalForm.repeatPassword.$touch()}},model:{value:e.generalForm.repeatPassword,callback:function(t){e.$set(e.generalForm,"repeatPassword",t)},expression:"generalForm.repeatPassword"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-radio-group",{attrs:{row:"","error-messages":e.accountTypeError},on:{blur:function(t){return e.$v.generalForm.accountType.$touch()}},model:{value:e.generalForm.accountType,callback:function(t){e.$set(e.generalForm,"accountType",t)},expression:"generalForm.accountType"}},[a("v-radio",{attrs:{label:"Personal",value:"Personal",color:"primary"}}),a("v-radio",{attrs:{label:"Organization",value:"Organization",color:"primary"}})],1)],1)],1),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"ma-4 form-btn",attrs:{to:{name:"login"},color:"secondary"}},[e._v("\n                                            Sign in \n                                        ")]),a("v-btn",{staticClass:"ma-4 form-btn",attrs:{color:"secondary"},on:{click:function(t){return e.nextView()}}},[e._v("\n                                            NEXT\n                                        ")])],1)],1)],1):e._e()],1)],1),a("v-stepper-content",{attrs:{step:"2"}},[2==e.view&&"Personal"==e.generalForm.accountType?a("RegisterPersonal",{on:{beforeViewChield:e.beforeView,registerPersonal:e.register}}):e._e(),2==e.view&&"Organization"==e.generalForm.accountType?a("RegisterOrganization",{on:{beforeViewChield:e.beforeView,registerOrganization:e.register}}):e._e()],1)],1)],1)],1)],1)],1)},ot=[],st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-card",{staticClass:"form-card",attrs:{flat:""}},[a("v-app-bar",{attrs:{color:"primary",dark:""}},[a("v-row",{attrs:{justify:"center"}},[a("h1",[e._v("Personal info")])])],1),a("v-card-text",[a("v-text-field",{attrs:{label:"Nick",outlined:"","prepend-inner-icon":"mdi-pound","error-messages":e.nickError},on:{blur:function(t){return e.$v.personalForm.nick.$touch()}},model:{value:e.personalForm.nick,callback:function(t){e.$set(e.personalForm,"nick",t)},expression:"personalForm.nick"}}),a("v-text-field",{attrs:{label:"Name",outlined:"","prepend-inner-icon":"mdi-format-text","error-messages":e.nameError},on:{blur:function(t){return e.$v.personalForm.name.$touch()}},model:{value:e.personalForm.name,callback:function(t){e.$set(e.personalForm,"name",t)},expression:"personalForm.name"}}),a("v-text-field",{attrs:{label:"Last Name",outlined:"","prepend-inner-icon":"mdi-format-text","error-messages":e.lastNameError},on:{blur:function(t){return e.$v.personalForm.lastName.$touch()}},model:{value:e.personalForm.lastName,callback:function(t){e.$set(e.personalForm,"lastName",t)},expression:"personalForm.lastName"}}),a("v-select",{attrs:{label:"Country",items:e.countriesNames,"prepend-inner-icon":"mdi-map-marker-outline",dense:"",outlined:"","error-messages":e.countryError},on:{change:e.countrySelected,blur:function(t){return e.$v.personalForm.country.$touch()}},model:{value:e.personalForm.country,callback:function(t){e.$set(e.personalForm,"country",t)},expression:"personalForm.country"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"ma-4 form-btn",attrs:{color:"secondary"},on:{click:function(t){return e.beforeView()}}},[e._v("\n                    BEFORE \n                ")]),a("v-btn",{staticClass:"ma-4 form-btn",attrs:{color:"secondary"},on:{click:function(t){return e.registerPersonalUser()}}},[e._v("\n                    Register\n                ")])],1)],1)],1)],1)},ct=[],lt=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Montenegro",code:"ME"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],dt=a("b5ae");const ut=e=>/^(?! )(?!.* {2})[a-zA-ZáéíóúÁÉÍÓÚüÜñÑ ]+$/.test(e);var mt={data(){return{countriesNames:[],personalForm:{nick:"",name:"",lastName:"",country:""}}},created(){for(let e of lt)this.countriesNames.push(e.name)},methods:{countrySelected(e){this.country=e.name},registerPersonalUser(){this.$v.personalForm.$invalid?this.$v.personalForm.$touch():this.$emit("registerPersonal",this.personalForm)},beforeView(){this.$emit("beforeViewChield")}},validations:{personalForm:{nick:{required:dt["required"],maxLength:Object(dt["maxLength"])(20)},name:{required:dt["required"],accentAndSpacesValidator:ut,maxLength:Object(dt["maxLength"])(20)},lastName:{required:dt["required"],accentAndSpacesValidator:ut,maxLength:Object(dt["maxLength"])(30)},country:{required:dt["required"]}}},computed:{nickError(){let e=[];return this.$v.personalForm.nick.$dirty?(this.$v.personalForm.nick.required||e.push("Nick required."),this.$v.personalForm.nick.maxLength||e.push("Max length 20."),e):e},nameError(){let e=[];return this.$v.personalForm.name.$dirty?(this.$v.personalForm.name.required||e.push("Name required."),this.$v.personalForm.name.maxLength||e.push("Max length 20."),this.$v.personalForm.name.accentAndSpacesValidator||e.push("Alphabet characters only."),e):e},lastNameError(){let e=[];return this.$v.personalForm.lastName.$dirty?(this.$v.personalForm.lastName.required||e.push("Last name required."),this.$v.personalForm.lastName.maxLength||e.push("Max length 20."),this.$v.personalForm.lastName.accentAndSpacesValidator||e.push("Alphabet characters only."),e):e},countryError(){let e=[];return this.$v.personalForm.country.$dirty?(this.$v.personalForm.country.required||e.push("Country required."),e):e}}},pt=mt,ht=(a("bcf8"),Object(v["a"])(pt,st,ct,!1,null,null,null)),vt=ht.exports;f()(ht,{VAppBar:L["a"],VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VRow:A["a"],VSelect:Me["a"],VTextField:De["a"]});var gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-card",{staticClass:"form-card",attrs:{flat:""}},[a("v-app-bar",{attrs:{color:"primary",dark:""}},[a("v-row",{attrs:{justify:"center"}},[a("h1",[e._v("Org. info")])])],1),a("v-card-text",[a("v-text-field",{attrs:{label:"Organization name",outlined:"","prepend-inner-icon":"mdi-format-text","error-messages":e.nameError},on:{blur:function(t){return e.$v.organizationForm.name.$touch()}},model:{value:e.organizationForm.name,callback:function(t){e.$set(e.organizationForm,"name",t)},expression:"organizationForm.name"}}),a("v-text-field",{attrs:{label:"Parking spaces",outlined:"","prepend-inner-icon":"mdi-boom-gate-up","error-messages":e.parkingSpacesError},on:{blur:function(t){return e.$v.organizationForm.parkingSpaces.$touch()}},model:{value:e.organizationForm.parkingSpaces,callback:function(t){e.$set(e.organizationForm,"parkingSpaces",t)},expression:"organizationForm.parkingSpaces"}}),a("Map",{on:{updatedMarkerFromMap:e.updatedMarker}})],1),a("v-card-actions",{attrs:{id:"v-card-actions"}},[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"ma-4 form-btn",attrs:{color:"secondary"},on:{click:function(t){return e.beforeView()}}},[e._v("\n                    BEFORE \n                ")]),a("v-btn",{staticClass:"ma-4 form-btn",attrs:{color:"secondary"},on:{click:function(t){return e.registerOrganizationUser()}}},[e._v("\n                    Register\n                ")])],1)],1)],1)],1)},ft=[],bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{attrs:{justify:"center"}},[e._v("\n        Put a marker in your garaje door.\n    ")]),a("div",[a("script",{attrs:{type:"application/javascript",src:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js"}}),a("link",{attrs:{href:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css",rel:"stylesheet"}}),a("div",{attrs:{id:"map"},on:{click:e.updatedMarker}})])],1)},wt=[],yt=a("e192"),kt=a.n(yt),xt=null,Vt={mounted(){kt.a.accessToken="pk.eyJ1IjoicHJ1ZWJhMSIsImEiOiJjazFpNm1kNDAwMzJhM2ltbmRwcXJxbzUyIn0.xp_6hLfEEPqJsPfQA4pmNg",xt=new kt.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[4.5,40],zoom:0}),xt.addControl(new kt.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),xt.on("click",(function(e){this.garajeDoor?(this.garajeDoor.remove(),this.garajeDoor=(new kt.a.Marker).setLngLat(e.lngLat).addTo(xt)):this.garajeDoor=(new kt.a.Marker).setLngLat(e.lngLat).addTo(xt)}))},methods:{updatedMarker(){this.$emit("updatedMarkerFromMap",xt.garajeDoor)}}},Ft=Vt,jt=(a("8e55"),Object(v["a"])(Ft,bt,wt,!1,null,null,null)),Ot=jt.exports;f()(jt,{VRow:A["a"]});const St=e=>/^(?! )(?!.* {2})[a-zA-ZáéíóúÁÉÍÓÚüÜñÑ ]+$/.test(e);var _t={components:{Map:Ot},data(){return{organizationForm:{name:"",parkingSpaces:"",garajeDoorCoordenates:""}}},methods:{beforeView(){this.$emit("beforeViewChield")},registerOrganizationUser(){this.$v.organizationForm.$invalid?this.$v.organizationForm.$touch():this.$emit("registerOrganization",this.organizationForm)},updatedMarker(e){this.organizationForm.garajeDoorCoordenates=e._lngLat}},validations:{organizationForm:{name:{required:dt["required"],accentAndSpacesValidator:St,maxLength:Object(dt["maxLength"])(30)},parkingSpaces:{required:dt["required"],numeric:dt["numeric"]}}},computed:{nameError(){let e=[];return this.$v.organizationForm.name.$dirty?(this.$v.organizationForm.name.required||e.push("Name required."),this.$v.organizationForm.name.maxLength||e.push("Max length 30."),this.$v.organizationForm.name.accentAndSpacesValidator||e.push("Alphabet characters only."),e):e},parkingSpacesError(){let e=[];return this.$v.organizationForm.parkingSpaces.$dirty?(this.$v.organizationForm.parkingSpaces.required||e.push("Parking spaces required."),this.$v.organizationForm.parkingSpaces.numeric||e.push("Numbers only"),e):e}}},Ct=_t,Tt=(a("7094"),Object(v["a"])(Ct,gt,ft,!1,null,null,null)),Rt=Tt.exports;f()(Tt,{VAppBar:L["a"],VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VRow:A["a"],VTextField:De["a"]});var zt={components:{RegisterPersonal:vt,RegisterOrganization:Rt},data(){return{view:1,showPassword:!1,showPassword:!1,generalForm:{email:"",password:"",repeatPassword:"",accountType:""}}},created(){this.setTopBarName("Sign Up")},methods:{...Object(c["c"])("core",["setTopBarName"]),...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),nextView(){this.$v.generalForm.$invalid?this.$v.generalForm.$touch():this.view++},beforeView(){this.view--},async register(e){var t=null;switch(this.generalForm.accountType){case"Personal":var a=new be({email:this.generalForm.email,password:this.generalForm.password,nick:e.nick,name:e.name,lastName:e.lastName,country:e.country});t=await a.createUserAuth();try{await a.newPersonalUserInDatabase(t),await a.sendEmailVerification(),this.$router.push({name:"emailVerification"}),this.showNotificationSuccess({msg:"Successful register",timeout:4e3,axisY:"top",axisX:"center"})}catch(r){this.showNotificationError({msg:"An error ocurred during register.",timeout:4e3,axisY:"top",axisX:"center"})}break;case"Organization":var i=new fe({email:this.generalForm.email,password:this.generalForm.password,name:e.name,parkingSpaces:e.parkingSpaces,coordenates:e.garajeDoorCoordenates});t=await i.createUserAuth();try{await i.newOrganizationUserInDatabase(t),await i.sendEmailVerification(),this.$router.push({name:"emailVerification"}),this.showNotificationSuccess({msg:"Successful register",timeout:4e3,axisY:"top",axisX:"center"})}catch(r){this.showNotificationError({msg:"An error ocurred during register.",timeout:4e3,axisY:"top",axisX:"center"})}break}}},validations:{generalForm:{email:{required:dt["required"],email:dt["email"]},password:{required:dt["required"],minLength:Object(dt["minLength"])(6),maxLength:Object(dt["maxLength"])(20)},repeatPassword:{required:dt["required"],sameAs:Object(dt["sameAs"])("password")},accountType:{required:dt["required"]}}},computed:{emailError(){let e=[];return this.$v.generalForm.email.$dirty?(this.$v.generalForm.email.required||e.push("Email required."),this.$v.generalForm.email.email||e.push("Invalid email."),e):e},passwordError(){let e=[];return this.$v.generalForm.password.$dirty?(this.$v.generalForm.password.required||e.push("Password required."),this.$v.generalForm.password.minLength||e.push("Min length 6."),this.$v.generalForm.password.maxLength||e.push("Max length 20."),e):e},repeatPasswordError(){let e=[];return this.$v.generalForm.password.$dirty?(this.$v.generalForm.password.required||e.push("Password required."),this.$v.generalForm.repeatPassword.sameAs||e.push("Passwords must match."),e):e},accountTypeError(){let e=[];return this.$v.generalForm.accountType.$dirty?(this.$v.generalForm.accountType.required||e.push("Account type required."),e):e}}},Lt=zt,Nt=(a("00e2"),a("67b6")),Et=a("43a6"),Pt=a("7e85"),At=a("e516"),$t=a("9c54"),It=a("56a4"),Mt=Object(v["a"])(Lt,nt,ot,!1,null,"4f3fe8bc",null),Dt=Mt.exports;f()(Mt,{VAppBar:L["a"],VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCol:Te["a"],VContainer:Re["a"],VDivider:b["a"],VRadio:Nt["a"],VRadioGroup:Et["a"],VRow:A["a"],VStepper:Pt["a"],VStepperContent:At["a"],VStepperHeader:$t["a"],VStepperItems:$t["b"],VStepperStep:It["a"],VTextField:De["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":""}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{xs:"10",md:"8"}},[a("v-card",{attrs:{elevation:"10"}},[a("v-app-bar",{attrs:{color:"primary",dark:""}},[a("v-row",{attrs:{justify:"center"}},[a("h1",[e._v("Login")])])],1),a("v-card-text",[a("v-text-field",{attrs:{label:"Email",outlined:"","prepend-inner-icon":"mdi-at","error-messages":e.emailError},on:{blur:function(t){return e.$v.loginForm.email.$touch()}},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}}),a("v-text-field",{attrs:{label:"Password",type:e.showPassword?"text":"password",outlined:"","prepend-inner-icon":"mdi-textbox-password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off","error-messages":e.passwordError},on:{"click:append":function(t){e.showPassword=!e.showPassword},blur:function(t){return e.$v.loginForm.password.$touch()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"ma-4 form-btn",attrs:{to:{name:"register"},color:"secondary"}},[e._v("\n                            Sign up\n                        ")]),a("v-btn",{staticClass:"ma-4 form-btn",attrs:{loading:e.loginButtonLoading,color:"secondary"},on:{click:function(t){return e.login()}}},[e._v("\n                            Login\n                        ")])],1)],1)],1)],1)],1)],1)},Ut=[],qt={data(){return{showPassword:!1,loginButtonLoading:!1,loginForm:{email:"",password:""}}},created(){this.setTopBarName("Sign In")},methods:{...Object(c["c"])("core",["setTopBarName"]),...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),async login(){if(this.$v.loginForm.$invalid)this.$v.loginForm.$touch();else{this.loginButtonLoading=!0,await this.sleep(1e3);var e=new ve(this.loginForm.email,this.loginForm.password);await e.login().then(e=>{this.loginButtonLoading=!1,this.$router.push({name:"dashboard"}),this.showNotificationSuccess({msg:"Successful login",timeout:4e3,axisY:"top",axisX:"center"})}).catch(e=>{switch(this.loginButtonLoading=!1,e.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/wrong-password":this.showNotificationError({msg:"Password or user invalid",timeout:4e3,axisY:"top",axisX:"center"});break}})}},sleep(e){return new Promise(t=>setTimeout(t,e))}},validations:{loginForm:{email:{required:dt["required"],email:dt["email"]},password:{required:dt["required"]}}},computed:{emailError(){let e=[];return this.$v.loginForm.email.$dirty?(this.$v.loginForm.email.required||e.push("Email required."),this.$v.loginForm.email.email||e.push("Invalid email."),e):e},passwordError(){let e=[];return this.$v.loginForm.password.$dirty?(this.$v.loginForm.password.required||e.push("Password required."),e):e}}},Gt=qt,Ht=Object(v["a"])(Gt,Bt,Ut,!1,null,null,null),Yt=Ht.exports;f()(Ht,{VAppBar:L["a"],VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCol:Te["a"],VContainer:Re["a"],VRow:A["a"],VTextField:De["a"]});var Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":""}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{xs:"10",md:"8"}},[a("v-card",{attrs:{"min-width":"280",elevation:"10"}},[a("v-app-bar",{attrs:{color:"primary",dark:""}},[a("v-row",{attrs:{justify:"center"}},[a("h1",[e._v("Confirm your email address.")])])],1),a("v-card-text",[a("v-row",{attrs:{justify:"center"}},[a("h3",[e._v("We send a email to "+e._s(e.user.email)+" ")])])],1),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.resendEmail}},[e._v("Resend Email")])],1)],1)],1)],1)],1)],1)},Xt=[],Kt={created(){this.setTopBarName("Verificate Email")},computed:{user(){return me.currentUser}},methods:{...Object(c["c"])("core",["setTopBarName"]),...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),async resendEmail(){await this.user.sendEmailVerification().then(()=>{this.showNotificationSuccess({msg:"We send another message to your email.",timeout:4e3,axisY:"top",axisX:"center"})}).catch(()=>{this.showNotificationError({msg:"An error ocurred during sending another message to your email.",timeout:4e3,axisY:"top",axisX:"center"})})}}},Wt=Kt,Zt=Object(v["a"])(Wt,Jt,Xt,!1,null,null,null),Qt=Zt.exports;f()(Zt,{VAppBar:L["a"],VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCol:Te["a"],VContainer:Re["a"],VRow:A["a"]});var ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},ta=[],aa={data(){return{oobCode:""}},created(){this.validate()},methods:{...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),async validate(){let e=this.$route.query.mode;switch(this.oobCode=this.$route.query.oobCode,e){case"verifyEmail":try{await me.applyActionCode(this.oobCode),await me.currentUser.reload(),this.showNotificationSuccess({msg:"Activation successful!!",timeout:4e3,axisY:"top",axisX:"center"}),this.$router.push({name:"dashboard"})}catch(t){this.showNotificationError({msg:"Activation failed!!",timeout:4e3,axisY:"top",axisX:"center"}),this.$router.push({name:"emailVerification"})}break;case"resetPassword":}}}},ia=aa,ra=Object(v["a"])(ia,ea,ta,!1,null,null,null),na=ra.exports,oa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[i("v-card",{attrs:{height:e.listenerHeight}},[i("v-row",{staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"12",sm:"4"}},[i("GarajeList",{ref:"list",on:{enableOrganizationForm:function(t){e.isEnableOrganizationForm=!0},selectOrganization:e.selectOrganization,enableRentForm:function(t){e.isEnableRentForm=!0},selectRent:e.selectRent}})],1),i("v-divider",{attrs:{vertical:""}}),e.selectedOrganization||e.selectedRent?e._e():i("v-col",[i("v-slide-y-transition",{attrs:{mode:"out-in"}},[i("v-container",{attrs:{"fill-height":""}},[i("v-row",{attrs:{justify:"center"}},[i("img",{attrs:{src:a("f9f8"),width:"40%",height:"50%",alt:""}})])],1)],1)],1),e.selectedOrganization?i("v-col",{attrs:{transition:"slide-x-transition"}},[i("v-slide-y-transition",{attrs:{mode:"out-in"}},[i("OrganizationInfo",{key:e.selectedOrganization.title+e.selectedOrganization.oid,attrs:{selectedOrganization:e.selectedOrganization}})],1)],1):e._e(),e.selectedRent?i("v-col",[i("v-slide-y-transition",{attrs:{mode:"out-in"}},[i("RentInfo",{attrs:{selectedRent:e.selectedRent}})],1)],1):e._e()],1)],1),i("OrganizationForm",{attrs:{enableOrganizationForm:e.isEnableOrganizationForm},on:{disableOrganizationForm:e.disableOrganizationForm}}),i("RentForm",{attrs:{enableRentForm:e.isEnableRentForm},on:{disableRentForm:function(t){e.isEnableRentForm=!1}}})],1)},sa=[],ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticStyle:{"background-color":"#164E77"}},[a("v-row",{attrs:{justify:"center"}},[a("h4",{staticStyle:{color:"white"}},[e._v(" Your Garages ")])])],1),a("v-divider"),a("v-list",[a("v-list-item",{on:{click:e.enableOrganizationForm}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-plus-circle")])],1),a("v-list-item-title",[e._v("Add new Organization")])],1),a("v-list-item",{on:{click:e.enableRentForm}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-plus-circle")])],1),a("v-list-item-title",[e._v("Rent a garaje")])],1)],1),a("v-divider"),a("v-list",{staticStyle:{width:"100%",height:"100%"},attrs:{"two-line":""}},[a("v-subheader",[e._v("Organizations")]),e._l(e.organizations,(function(t){return a("v-list-group",{key:t.oid,attrs:{disabled:"SENT"==t.requestStatus,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.name)}}),"SENT"==t.requestStatus?a("v-list-item-subtitle",[e._v("Request is not accepted yet")]):e._e()],1)]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"org.active"}},e._l(t.garajes,(function(t){return a("v-list-item",{key:t.title,on:{click:function(a){return e.selectOrganization(t)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.title)}})],1)],1)})),1)}))],2),a("v-divider"),a("v-list",{staticStyle:{width:"100%",height:"100%"},attrs:{"two-line":""}},[a("v-subheader",[e._v("Rents")]),e._l(e.rents,(function(t){return a("v-list-group",{key:t.oid,attrs:{disabled:"SENT"==t.requestStatus,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.name)}}),"SENT"==t.requestStatus?a("v-list-item-subtitle",[e._v("Request is not accepted yet")]):e._e()],1)]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"r.active"}},e._l(t.rents,(function(t){return a("v-list-item",{key:t.title,on:{click:function(a){return e.selectRent(t)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.title)}})],1)],1)})),1)}))],2)],1)},la=[];class da{constructor(){}async getAllRent(){let e=[],t=await pe.collection("rentGarajeSpace").get();return t.forEach(t=>{const a={};a.pid=t.id,a.dates=t.data().dates,a.endHour=t.data().endHour,a.startHour=t.data().startHour,a.uidOwner=t.data().uidOwner,a.coordenateLNG=t.data().coordenateLNG,a.coordenateLAT=t.data().coordenateLAT,e.push(a)}),e}async getRentByPID(e){}async getMyRentByPID(e,t){let a=[],i=await pe.collection("rentGarajeSpace").doc(e).collection("usersRents").get();return i.forEach(e=>{const i={};i.uidRent=e.data().uidRent,i.uidRent==t&&(i.approvedByOwner=e.data().approvedByOwner,i.coordenateLAT=e.data().coordenateLAT,i.coordenateLNG=e.data().coordenateLNG,i.dates=e.data().dates,i.endHour=e.data().endHour,i.startHour=e.data().startHour,a.push(i))}),a}async addRentToparking(e,t,a,i,r,n,o,s){let c=pe.batch();c.set(pe.collection("rentGarajeSpace").doc(e).collection("usersRents").doc(a),{approvedByOwner:!1,uidRent:a,dates:i,startHour:r,endHour:n,coordenateLAT:o,coordenateLNG:s}),c.set(pe.collection("users").doc(a).collection("parkingsRent").doc(e),{pid:e,uidOwner:t}),await c.commit()}async getRentsOfParking(e){let t=[],a=await pe.collection("rentGarajeSpace").doc(e).collection("usersRents").get();return a.forEach(e=>{const a={};a.uidRent=e.data().uidRent,a.approvedByOwner=e.data().approvedByOwner,a.coordenateLAT=e.data().coordenateLAT,a.coordenateLNG=e.data().coordenateLNG,a.dates=e.data().dates,a.endHour=e.data().endHour,a.startHour=e.data().startHour,t.push(a)}),t}async acceptRent(e,t){let a=pe.batch();a.update(pe.collection("rentGarajeSpace").doc(t).collection("usersRents").doc(e.uidRent),{approvedByOwner:!0}),await a.commit()}async denyRent(e,t){let a=pe.batch();a.delete(pe.collection("rentGarajeSpace").doc(t).collection("usersRents").doc(e.uidRent)),a.delete(pe.collection("users").doc(e.uidRent).collection("parkingsRent").doc(t)),await a.commit()}}var ua={data(){return{organizations:[],rents:[]}},created(){this.getAllOrganizationsList(),this.getAllRentList()},computed:{userLogged(){return this.$store.state.session.user}},methods:{enableOrganizationForm(){this.$emit("enableOrganizationForm")},enableRentForm(){this.$emit("enableRentForm")},selectOrganization(e){this.$emit("selectOrganization",e)},selectRent(e){this.$emit("selectRent",e)},async getAllOrganizationsList(){await this.userLogged.getOrganizations().then(e=>{this.organizations=[];for(let t of e){let e=new fe({email:void 0,password:void 0,name:void 0,parkingSpaces:void 0,coordenates:void 0});e.getOrganizationByOID(t.oid).then(e=>{let a=e.organizationName;this.userLogged.getParkingsOfOrganization(t.oid).then(a=>{let i=[];for(const r of a)i.push({title:r.title,oid:t.oid,pid:r.pid,coordenateLAT:e.coordenateLAT,coordenateLNG:e.coordenateLNG});return i}).then(e=>{this.organizations.push({oid:t.oid,name:a,requestStatus:t.requestStatus,garajes:e})})})}})},async getAllRentList(){await this.userLogged.getRentList().then(e=>{this.rents=[];for(const t of e){let e=1;const a=new da;a.getMyRentByPID(t.pid,this.userLogged.uid).then(e=>{let a=[],i=1;for(const r of e)a.push({title:"Parking "+i,uidOwner:t.uidOwner,approvedByOwner:r.approvedByOwner,coordenates:[r.coordenateLNG,r.coordenateLAT],dates:r.dates,endHour:r.endHour,startHour:r.startHour}),i+=1;return a}).then(a=>{this.rents.push({pid:t.pid,name:"Rent "+e,rents:a}),e+=1})}})}}},ma=ua,pa=a("56b0"),ha=a("e0c7"),va=Object(v["a"])(ma,ca,la,!1,null,null,null),ga=va.exports;f()(va,{VCard:_e["a"],VCardTitle:Ce["c"],VDivider:b["a"],VIcon:w["a"],VList:k["a"],VListGroup:pa["a"],VListItem:x["a"],VListItemContent:F["a"],VListItemIcon:j["a"],VListItemSubtitle:F["b"],VListItemTitle:F["c"],VRow:A["a"],VSubheader:ha["a"]});var fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"900"},model:{value:e.enableOrganizationForm,callback:function(t){e.enableOrganizationForm=t},expression:"enableOrganizationForm"}},[a("v-card",{attrs:{height:"700"}},[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-card-title",{staticClass:"headline"},[e._v("ADD ORGANIZATION")])],1),a("v-row",[a("v-tabs",{staticClass:"mt-2",attrs:{"fixed-tabs":""}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-format-list-bulleted")]),e._v("\n                        LIST\n                    ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-map-search")]),e._v("\n                        MAP\n                    ")],1),a("v-tab-item",[a("v-container",[a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v("\n                                    List of Organizations\n                                    "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{loading:e.loadingListOrganizations,"loading-text":"Loading... Please wait",headers:e.headers,items:e.organizations,search:e.search},scopedSlots:e._u([{key:"item.action",fn:function(t){var i=t.item;return[i.status?a("v-icon",{staticClass:"ml-12",on:{click:function(t){return e.unfollowOrganization(i)}}},[e._v(" mdi-minus-circle-outline ")]):a("v-icon",{on:{click:function(t){return e.followOrganization(i)}}},[e._v(" mdi-plus-circle-outline ")])]}}])}),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.disableOrganizationForm}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.confirmOrganizationForm}},[e._v("Confirm")])],1)],1)],1)],1)],1),a("v-tab-item",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"10"}},[a("MapGarajes",{attrs:{organizations:e.organizations},on:{followOIDFromMap:e.followOIDFromMap,closeForm:e.disableOrganizationForm}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},ba=[];class wa{constructor(){}async getOrganizationList(){let e=[],t=await pe.collection("organizationsNames").get();return t.forEach(t=>{const a={};a.name=t.id,a.oid=t.data().oid,e.push(a)}),e}}var ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("script",{attrs:{type:"application/javascript",src:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js"}}),a("link",{attrs:{href:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css",rel:"stylesheet"}}),a("div",{attrs:{id:"map"}})]),a("div",{staticClass:"test"},[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.cancelForm}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.confirmForm}},[e._v("Confirm")])],1)],1)])},ka=[],xa=null;window.followOID=[];var Va={props:["organizations"],data(){return{listOID:[]}},async mounted(){kt.a.accessToken="pk.eyJ1IjoicHJ1ZWJhMSIsImEiOiJjazFpNm1kNDAwMzJhM2ltbmRwcXJxbzUyIn0.xp_6hLfEEPqJsPfQA4pmNg",xa=new kt.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",zoom:1}),this.addControlToMap(),await this.getOrganizationsInfo()},methods:{creatingPopup(e,t){var a=new kt.a.Popup({offset:25}).setText(e+"'s garaje is here.");const i=`\n                <div> \n                    <b> ${e} organization</b> \n                    <hr> \n                    <button style="margin-left: 5%; type="button" id="${t}" \n                        onclick="\n                                    if(!window.followOID.includes('${t}')){\n                                        window.followOID.push(this.id);\n                                    } \n                                "> Follow</button>\n                    <button style="margin-left: 30%;" type="button" id="${t}1" \n                        onclick="   \n                                    if(window.followOID.includes('${t}')){\n                                        window.followOID.splice(window.followOID.indexOf('${t}'));\n                                    }  \n                                "> Unfollow</button>\n                    <hr>  \n                </div>\n                `;a.setHTML(i);document.createElement("div");return a},addControlToMap(){xa.addControl(new kt.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),xa.addControl(new kt.a.NavigationControl)},async getOrganizationsInfo(){let e=new fe({email:void 0,password:void 0,name:void 0,parkingSpaces:void 0,coordenates:void 0});for(const t of this.organizations)await e.getOrganizationByOID(t.oid).then(e=>{let a={};return a.oid=t.oid,a.name=e.organizationName,a.coordenates=[e.coordenateLNG,e.coordenateLAT],a}).then(e=>{const t=this.creatingPopup(e.name,e.oid);this.garajeDoor=(new kt.a.Marker).setLngLat(e.coordenates).setPopup(t).addTo(xa),this.listOID.push(e.oid)})},confirmForm(){this.$emit("followOIDFromMap",window.followOID)},cancelForm(){this.$emit("closeForm")}}},Fa=Va,ja=(a("e82d"),Object(v["a"])(Fa,ya,ka,!1,null,"c303724e",null)),Oa=ja.exports;f()(ja,{VBtn:E["a"],VContainer:Re["a"],VRow:A["a"]});var Sa={props:["enableOrganizationForm"],components:{MapGarajes:Oa},data(){return{loadingListOrganizations:!0,search:"",headers:[{text:"Name",align:"left",value:"name"},{text:"Free spaces",value:"freeSpaces",align:"center"},{text:"Actions",value:"action",sortable:!1,align:"center"}],organizations:[]}},created(){this.getAllOrganizationsList()},computed:{userLogged(){return this.$store.state.session.user}},methods:{...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),disableOrganizationForm(){this.$emit("disableOrganizationForm")},async confirmOrganizationForm(){const e=[];for(const t of this.organizations)t.status&&e.push(t);await this.userLogged.requestInvitation(e).then(()=>{this.showNotificationSuccess({msg:"The requests were sent.",timeout:4e3,axisY:"top",axisX:"center"}),this.$emit("disableOrganizationForm",!0)}).catch(()=>{this.showNotificationError({msg:"An error ocurred during sending requests.",timeout:4e3,axisY:"top",axisX:"center"}),this.$emit("disableOrganizationForm",!1)})},followOrganization(e){let t=this.organizations.indexOf(e);console.log(t),this.organizations[t].status=!0},unfollowOrganization(e){let t=this.organizations.indexOf(e);console.log(t),this.organizations[t].status=!1},async getAllOrganizationsList(){const e=new wa,t=await e.getOrganizationList(),a=await this.userLogged.getOrganizations();this.loadingListOrganizations=!0,await this.sleep(1500);let i=[];for(const r of a)i.push(r.oid);for(const r of t)i.includes(r.oid)||this.organizations.push({oid:r.oid,name:r.name,status:!1});this.loadingListOrganizations=!1},followOIDFromMap(e){for(const t of e)for(const e of this.organizations)if(e.oid==t){e.status=!0;break}this.confirmOrganizationForm()},sleep(e){return new Promise(t=>setTimeout(t,e))}}},_a=Sa,Ca=a("8fea"),Ta=a("71a3"),Ra=a("c671"),za=a("fe57"),La=Object(v["a"])(_a,fa,ba,!1,null,null,null),Na=La.exports;f()(La,{VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardTitle:Ce["c"],VCol:Te["a"],VContainer:Re["a"],VDataTable:Ca["a"],VDialog:Ie["a"],VIcon:w["a"],VRow:A["a"],VSpacer:$["a"],VTab:Ta["a"],VTabItem:Ra["a"],VTabs:za["a"],VTextField:De["a"]});var Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tabs",{staticClass:"mt-2",attrs:{"fixed-tabs":""}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-account")]),e._v("\n        INFO\n    ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-timetable")]),e._v("\n        RENT YOUR GARAJE\n    ")],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[e.isLoading?a("v-row",{staticClass:"mt-10",attrs:{justify:"center"}},[a("v-progress-circular",{attrs:{size:75,color:"primary",indeterminate:""}})],1):a("v-card-text",[a("ul",{staticClass:"mt-5"},[a("li",[a("b",[e._v("Name of garaje:")]),e._v(" "+e._s(e.selectedOrganization.title)+" ")]),a("li",[a("b",[e._v("Belongs to")]),e._v(" "+e._s(e.organization.name)+" "),a("b",[e._v("organization")])]),a("li",[a("b",[e._v("Coordenates: ")])])]),a("MapGaraje",{attrs:{organization:e.organization}})],1)],1)],1),a("v-tab-item",[a("OrganizationRent",{attrs:{selectedOrganization:e.selectedOrganization}})],1)],1)},Pa=[],Aa=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},$a=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("script",{attrs:{type:"application/javascript",src:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js"}}),a("link",{attrs:{href:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css",rel:"stylesheet"}}),a("div",{attrs:{id:"map"}})])}],Ia=null,Ma={props:["organization"],mounted(){kt.a.accessToken="pk.eyJ1IjoicHJ1ZWJhMSIsImEiOiJjazFpNm1kNDAwMzJhM2ltbmRwcXJxbzUyIn0.xp_6hLfEEPqJsPfQA4pmNg",Ia=new kt.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:this.organization.coordenates,zoom:9});const e=this.creatingPopup();this.garajeDoor=(new kt.a.Marker).setLngLat(this.organization.coordenates).setPopup(e).addTo(Ia),this.addControlToMap(),Ia.on("click",(function(e){this.garajeDoor}))},methods:{creatingPopup(){var e=new kt.a.Popup({offset:25}).setText(this.organization.name+"'s garaje is here."),t=document.createElement("div");return t.id="marker",e},addControlToMap(){Ia.addControl(new kt.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),Ia.addControl(new kt.a.NavigationControl)}}},Da=Ma,Ba=(a("a39a"),Object(v["a"])(Da,Aa,$a,!1,null,"1e9fe79c",null)),Ua=Ba.exports,qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:""}},[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"10"}},[a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v("Date")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("Start hour")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>3,step:"3"}},[e._v("End hour")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[e._l(e.rentList,(function(t){return a("ul",{key:t.udiRent,attrs:{justify:"center"}},[t.approvedByOwner?a("li",{staticClass:"mb-2"},[a("b",{style:{color:t.color}},[e._v("Color")]),e._v("   | hours: ["+e._s(t.startHour)+" - "+e._s(t.endHour)+"]")]):a("li",{staticClass:"mb-2"},[a("b",{style:{color:t.color}},[e._v("Color")]),e._v("   | hours: ["+e._s(t.startHour)+" - "+e._s(t.endHour)+"]  "),a("v-btn",{staticClass:"ml-5 mr-2",attrs:{small:"",color:"red",dark:""},on:{click:function(a){return e.denyRent(t)}}},[e._v("Deny")]),a("v-btn",{attrs:{small:"",color:"green",dark:""},on:{click:function(a){return e.acceptRent(t)}}},[e._v("Accept")])],1)])})),a("v-row",{staticClass:"mt-4",attrs:{justify:"center"}},[a("v-date-picker",{attrs:{multiple:"","event-color":function(e){return e[9]%2?"red":"yellow"},events:e.functionEvents,min:e.today},model:{value:e.form.selectedDates,callback:function(t){e.$set(e.form,"selectedDates",t)},expression:"form.selectedDates"}})],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"primary",disabled:0==e.form.selectedDates.length},on:{click:function(t){e.step+=1}}},[e._v(" Next ")])],1)],2),a("v-stepper-content",{attrs:{step:"2"}},[a("v-row",{attrs:{justify:"center"}},[a("h2",[e._v("Start:")])]),a("v-row",{attrs:{justify:"center"}},[a("v-time-picker",{attrs:{landscape:"",max:e.form.end,format:"24hr","event-color":function(e){return e[9]%2?"red":"yellow"},events:e.functionEvents},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mr-6",attrs:{color:"primary"},on:{click:function(t){e.step-=1}}},[e._v(" Before ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.form.start},on:{click:function(t){e.step+=1}}},[e._v(" Next ")])],1)],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-row",{attrs:{justify:"center"}},[a("h2",[e._v("End:")])]),a("v-row",{attrs:{justify:"center"}},[a("v-time-picker",{attrs:{landscape:"",min:e.form.start,format:"24hr"},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mr-6",attrs:{color:"primary"},on:{click:function(t){e.step-=1}}},[e._v(" Before ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.form.end},on:{click:e.publishRent}},[e._v(" Publish ")])],1)],1)],1)],1)],1)],1)],1)],1)},Ga=[],Ha={props:["selectedOrganization"],data(){return{step:1,today:null,colors:["#339933","#003366","#ff3300","#33cccc","#996633","#ffcc66","#ff66cc","#993366","#cc00cc","#666699"],form:{selectedDates:[],start:null,end:null},rentList:[]}},created(){this.currentDate(),this.getRentsOfParking()},computed:{userLogged(){return this.$store.state.session.user}},methods:{...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),functionEvents(e){this.selectedOrganization.usersRents=[];for(const n of this.rentList)this.selectedOrganization.usersRents.push({userUID:n.uidRent,dates:n.dates});const[t,a,i]=e.split("-");let r=0;for(const n of this.selectedOrganization.usersRents){for(const e of n.dates){const[n,o,s]=e.split("-");if(i==s&&a==o&&t==n)return this.colors[r]}r+=1}},currentDate(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();this.today=i+"-"+a+"-"+t},async publishRent(){await this.userLogged.publishRent(this.selectedOrganization.pid,this.form.selectedDates,this.form.start,this.form.end,this.selectedOrganization.coordenateLAT,this.selectedOrganization.coordenateLNG).then(()=>{this.showNotificationSuccess({msg:"Published succesfull.",timeout:4e3,axisY:"top",axisX:"center"}),this.step=1}).catch(()=>{this.showNotificationError({msg:"Error during publising.",timeout:4e3,axisY:"top",axisX:"center"})})},async getRentsOfParking(){const e=new da;await e.getRentsOfParking(this.selectedOrganization.pid).then(e=>{let t=0;for(const a of e)this.rentList.push({uidRent:a.uidRent,approvedByOwner:a.approvedByOwner,dates:a.dates,endHour:a.endHour,startHour:a.startHour,color:this.colors[t],index:t}),t+=1})},async acceptRent(e){const t=new da;await t.acceptRent(e,this.selectedOrganization.pid),this.rentList.splice(e.index,1),this.getRentsOfParking()},async denyRent(e){const t=new da;await t.denyRent(e,this.selectedOrganization.pid),this.rentList.splice(e.index,1),this.getRentsOfParking()},sleep(e){return new Promise(t=>setTimeout(t,e))}}},Ya=Ha,Ja=a("2e4b"),Xa=a("c964"),Ka=Object(v["a"])(Ya,qa,Ga,!1,null,null,null),Wa=Ka.exports;f()(Ka,{VBtn:E["a"],VCard:_e["a"],VCol:Te["a"],VContainer:Re["a"],VDatePicker:Ja["a"],VDivider:b["a"],VRow:A["a"],VStepper:Pt["a"],VStepperContent:At["a"],VStepperHeader:$t["a"],VStepperItems:$t["b"],VStepperStep:It["a"],VTimePicker:Xa["b"]});var Za={props:["selectedOrganization"],components:{MapGaraje:Ua,OrganizationRent:Wa},data(){return{organization:{},isLoading:!0}},async created(){await this.getOrganizationInfo(),this.sleep(2e3).then(()=>{this.isLoading=!1})},methods:{async getOrganizationInfo(){let e=new fe({email:void 0,password:void 0,name:void 0,parkingSpaces:void 0,coordenates:void 0});await e.getOrganizationByOID(this.selectedOrganization.oid).then(e=>{let t={};return t.name=e.organizationName,t.coordenates=[e.coordenateLNG,e.coordenateLAT],t}).then(e=>{this.organization=e})},sleep(e){return new Promise(t=>setTimeout(t,e))}}},Qa=Za,ei=Object(v["a"])(Qa,Ea,Pa,!1,null,null,null),ti=ei.exports;f()(ei,{VCard:_e["a"],VCardText:Ce["b"],VIcon:w["a"],VProgressCircular:He["a"],VRow:A["a"],VTab:Ta["a"],VTabItem:Ra["a"],VTabs:za["a"]});var ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"900"},model:{value:e.enableRentForm,callback:function(t){e.enableRentForm=t},expression:"enableRentForm"}},[a("v-card",{attrs:{height:"700"}},[a("v-row",{attrs:{justify:"center"}},[a("v-card-title",{staticClass:"headline"},[e._v("SELECT GARAGE TO RENT")])],1),a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"10"}},[a("MapRents",{attrs:{rents:e.rentsList},on:{closeForm:e.disableRentForm,selectedParking:e.selectedParking}})],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"900"},model:{value:e.parkingIsSelected,callback:function(t){e.parkingIsSelected=t},expression:"parkingIsSelected"}},[a("v-card",{attrs:{height:"700"}},[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"10"}},[a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v("Date")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("Start hour")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>3,step:"3"}},[e._v("End hour")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-row",{attrs:{justify:"center"}},[e._v("\n                                        RELLENAR CON INFO De cada color\n                                    ")]),a("v-row",{attrs:{justify:"center"}},[a("v-date-picker",{attrs:{multiple:"","allowed-dates":e.allowedDates,min:e.today},model:{value:e.form.selectedDates,callback:function(t){e.$set(e.form,"selectedDates",t)},expression:"form.selectedDates"}})],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"primary",disabled:0==e.form.selectedDates.length},on:{click:function(t){e.step+=1}}},[e._v(" Next ")])],1)],1),a("v-stepper-content",{attrs:{step:"2"}},[a("v-row",{attrs:{justify:"center"}},[a("h2",[e._v("Start:")])]),a("v-row",{attrs:{justify:"center"}},[a("v-time-picker",{attrs:{landscape:"",min:e.form.start,max:e.form.end,format:"24hr"},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mr-6",attrs:{color:"primary"},on:{click:function(t){e.step-=1}}},[e._v(" Before ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.form.start},on:{click:function(t){e.step+=1}}},[e._v(" Next ")])],1)],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-row",{attrs:{justify:"center"}},[a("h2",[e._v("End:")])]),a("v-row",{attrs:{justify:"center"}},[a("v-time-picker",{attrs:{landscape:"",min:e.form.start,max:e.form.end,format:"24hr"},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mr-6",attrs:{color:"primary"},on:{click:function(t){e.step-=1}}},[e._v(" Before ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.form.end,loading:e.loadingsendRentParking},on:{click:e.sendRentParking}},[e._v(" Send ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},ii=[],ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("script",{attrs:{type:"application/javascript",src:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js"}}),a("link",{attrs:{href:"https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css",rel:"stylesheet"}}),a("div",{attrs:{id:"map"}})]),a("div",{staticClass:"bottoms"},[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.cancelForm}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.confirmForm}},[e._v("Next")])],1)],1)])},ni=[],oi=null;window.rentPID=[];var si={props:["rents"],data(){return{listOID:[],pid:!0}},computed:{userLogged(){return this.$store.state.session.user}},async mounted(){kt.a.accessToken="pk.eyJ1IjoicHJ1ZWJhMSIsImEiOiJjazFpNm1kNDAwMzJhM2ltbmRwcXJxbzUyIn0.xp_6hLfEEPqJsPfQA4pmNg",oi=new kt.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",zoom:1}),this.addControlToMap();for(const e of this.rents)if(!this.itsMyPublish(e.uidOwner)){const t=this.creatingPopup(e),a=[e.coordenateLNG,e.coordenateLAT];this.garajeDoor=(new kt.a.Marker).setLngLat(a).setPopup(t).addTo(oi)}},methods:{creatingPopup(e){console.log(e);var t=new kt.a.Popup({offset:25}).setText(name+"'s garaje is here.");const a=`\n                    <div> \n                        <b> ${e.pid} publish</b> \n                        <hr> \n                        <button type="button"\n                            onclick=" window.rentPID.push( ${e.pid});\n\n                                    "> Follow</button>\n                        <hr>  \n                    </div>\n                    `;t.setHTML(a);document.createElement("div");return t},addControlToMap(){oi.addControl(new kt.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),oi.addControl(new kt.a.NavigationControl)},itsMyPublish(e){return e==this.userLogged.uid},confirmForm(){for(const e of this.rents)e.pid==window.rentPID&&this.$emit("selectedParking",e)},cancelForm(){this.$emit("closeForm")}}},ci=si,li=(a("5849"),Object(v["a"])(ci,ri,ni,!1,null,"72972c66",null)),di=li.exports;f()(li,{VBtn:E["a"],VContainer:Re["a"],VRow:A["a"]});var ui={components:{MapRents:di},props:["enableRentForm"],data(){return{infoRent:null,dialog:!0,loadingListRents:!0,rentsList:[],parkingIsSelected:!1,loadingsendRentParking:!1,step:1,today:null,form:{selectedDates:[],start:null,end:null}}},created(){this.getAllRentsList()},computed:{userLogged(){return this.$store.state.session.user}},methods:{disableRentForm(){this.$emit("disableRentForm")},async getAllRentsList(){const e=new da;this.rentsList=await e.getAllRent(),this.loadingListRents=!0,await this.sleep(1500),this.loadingListRents=!1},selectedParking(e){this.infoRent=e,this.form.start=e.startHour,this.form.end=e.endHour,this.disableRentForm(),this.parkingIsSelected=!0},allowedDates(e){const[t,a,i]=e.split("-");for(const r of this.infoRent.dates){const[e,n,o]=r.split("-");if(i==o&&a==n&&t==e)return!0}return!1},async sendRentParking(){const e=new da;this.rentsList=await e.addRentToparking(this.infoRent.pid,this.infoRent.uidOwner,this.userLogged.uid,this.form.selectedDates,this.form.start,this.form.end,this.infoRent.coordenateLAT,this.infoRent.coordenateLNG),this.loadingsendRentParking=!0,await this.sleep(1500),this.loadingsendRentParking=!1,this.parkingIsSelected=!1},sleep(e){return new Promise(t=>setTimeout(t,e))}}},mi=ui,pi=Object(v["a"])(mi,ai,ii,!1,null,null,null),hi=pi.exports;f()(pi,{VBtn:E["a"],VCard:_e["a"],VCardTitle:Ce["c"],VCol:Te["a"],VContainer:Re["a"],VDatePicker:Ja["a"],VDialog:Ie["a"],VDivider:b["a"],VRow:A["a"],VStepper:Pt["a"],VStepperContent:At["a"],VStepperHeader:$t["a"],VStepperItems:$t["b"],VStepperStep:It["a"],VTimePicker:Xa["b"]});var vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tabs",{staticClass:"mt-2",attrs:{"fixed-tabs":""}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-account")]),e._v("\n        INFO\n    ")],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[e.isLoading?a("v-row",{staticClass:"mt-10",attrs:{justify:"center"}},[a("v-progress-circular",{attrs:{size:75,color:"primary",indeterminate:""}})],1):a("v-card-text",[a("ul",{staticClass:"mt-5"},[a("li",[a("b",[e._v("Name of garaje:")]),e._v(" "+e._s(e.selectedRent.title)+" ")]),e.selectedRent.approvedByOwner?a("li",[a("b",[e._v("Approved by owner:")]),a("b",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.selectedRent.approvedByOwner))])]):a("li",[a("b",[e._v("Approved by owner:")]),a("b",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.selectedRent.approvedByOwner))])]),a("li",[a("b",[e._v("Owner nick:")]),e._v(" "+e._s(e.user.nick)+" ")]),a("li",[a("b",[e._v("Owner name:")]),e._v(" "+e._s(e.user.name)+", "+e._s(e.user.lastName)+" ")]),a("li",[a("b",[e._v("Dates:")]),e._v(" "+e._s(e.selectedRent.dates)+" ")]),a("li",[a("b",[e._v("Time ")]),e._v(" "+e._s(e.selectedRent.startHour)+" - "+e._s(e.selectedRent.endHour))]),a("li",[a("b",[e._v("Coordenates: ")])])]),a("MapGaraje",{attrs:{organization:e.selectedRent}})],1)],1)],1)],1)},gi=[],fi={props:["selectedRent"],components:{MapGaraje:Ua},data(){return{user:{},isLoading:!0}},async created(){let e=new be({nick:void 0,name:void 0,lastName:void 0,country:void 0});await e.getPersonalUserByUID(this.selectedRent.uidOwner).then(e=>{this.user.name=e.name,this.user.lastName=e.lastName,this.user.nick=e.nick}),this.sleep(2e3).then(()=>{this.isLoading=!1})},methods:{sleep(e){return new Promise(t=>setTimeout(t,e))}}},bi=fi,wi=Object(v["a"])(bi,vi,gi,!1,null,null,null),yi=wi.exports;f()(wi,{VCard:_e["a"],VCardText:Ce["b"],VIcon:w["a"],VProgressCircular:He["a"],VRow:A["a"],VTab:Ta["a"],VTabItem:Ra["a"],VTabs:za["a"]});var ki={components:{GarajeList:ga,OrganizationForm:Na,OrganizationInfo:ti,RentForm:hi,RentInfo:yi},data(){return{isEnableOrganizationForm:!1,isEnableRentForm:!1,selectedOrganization:null,selectedRent:null}},computed:{listenerHeight(){return.77*screen.height}},created(){this.setTopBarName("Organizations")},methods:{...Object(c["c"])("core",["setTopBarName"]),selectOrganization(e){this.selectedRent=null,this.selectedOrganization=e},selectRent(e){this.selectedOrganization=null,this.selectedRent=e},disableOrganizationForm(e){e&&this.$refs.list.getAllOrganizationsList(),this.isEnableOrganizationForm=!1}}},xi=ki,Vi=Object(v["a"])(xi,oa,sa,!1,null,null,null),Fi=Vi.exports;f()(Vi,{VCard:_e["a"],VCol:Te["a"],VContainer:Re["a"],VDivider:b["a"],VRow:A["a"],VSlideYTransition:Y["f"]});var ji=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{attrs:{height:e.listenerHeight}},[a("v-tabs",{staticClass:"mt-2",attrs:{"fixed-tabs":""}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-account")]),e._v("\n                USERS REQUEST\n            ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-timetable")]),e._v("\n                MANAGE ORGANIZATION\n            ")],1),a("v-tab-item",[a("UserRequestList")],1),a("v-tab-item",[a("OrganizationList")],1)],1)],1)],1)},Oi=[],Si=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v("\n            List of user's request\n            "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{loading:e.loadingListRequest,"loading-text":"Loading... Please wait",headers:e.headers,items:e.usersRequest,search:e.search},scopedSlots:e._u([{key:"item.action",fn:function(t){var i=t.item;return[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.denyRequest(i)}}},[e._v("DENY")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){return e.confirmRequest(i)}}},[e._v("ACCEPT")])]}}])})],1),a("UsersRequestForm",{attrs:{enableAcceptForm:e.isEnableAcceptForm,enableDenyForm:e.isEnableDenyForm,infoToAcceptForm:e.infoToAcceptForm},on:{disableAcceptForm:e.disableAcceptForm,disableDenyForm:function(t){e.isEnableDenyForm=!1}}})],1)},_i=[],Ci=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"900"},model:{value:e.enableAcceptForm,callback:function(t){e.enableAcceptForm=t},expression:"enableAcceptForm"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Add '"+e._s(e.infoToAcceptForm.userName)+"' to your organization")]),a("v-card-text",[e._v("Parking spaces occupied: "+e._s(e.infoToAcceptForm.numberOccupiedParking)+" of "+e._s(e.infoToAcceptForm.totalParkingSpaces)+" ")]),a("v-card-text",[e._v("How many parking spaces do you want to associate to '"+e._s(e.infoToAcceptForm.userName)+"' ?")]),a("v-slider",{staticClass:"mx-10",attrs:{min:"1",max:e.maxNumberOfParkingSpaces(),"thumb-size":24,"thumb-label":"always"},model:{value:e.parkingSpaces,callback:function(t){e.parkingSpaces=t},expression:"parkingSpaces"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.disableAcceptForm}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.acceptUser}},[e._v("Finish")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.enableDenyForm,callback:function(t){e.enableDenyForm=t},expression:"enableDenyForm"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Do you want to DENY user request ?")]),a("v-card-text",[e._v("Press 'NO' to cancel. Press 'YES' to deny user request.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.disableDenyForm}},[e._v("No")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Yes")])],1)],1)],1)],1)},Ti=[],Ri={props:["enableAcceptForm","enableDenyForm","infoToAcceptForm"],data(){return{parkingSpaces:0}},computed:{userLogged(){return this.$store.state.session.user}},methods:{...Object(c["b"])("snackbar",["showNotificationSuccess","showNotificationError"]),disableAcceptForm(e){this.$emit("disableAcceptForm",e)},disableDenyForm(){this.$emit("disableDenyForm")},maxNumberOfParkingSpaces(){return this.infoToAcceptForm.totalParkingSpaces-this.infoToAcceptForm.numberOccupiedParking},async acceptUser(){await this.userLogged.acceptUserRequest(this.infoToAcceptForm.uid,this.parkingSpaces).then(()=>{this.showNotificationSuccess({msg:"User added to your organization.",timeout:4e3,axisY:"top",axisX:"center"}),this.disableAcceptForm(!0)}).catch(()=>{this.showNotificationError({msg:"Error during adding user to your organization.",timeout:4e3,axisY:"top",axisX:"center"}),this.disableAcceptForm(!1)})}}},zi=Ri,Li=a("ba0d"),Ni=Object(v["a"])(zi,Ci,Ti,!1,null,null,null),Ei=Ni.exports;f()(Ni,{VBtn:E["a"],VCard:_e["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCardTitle:Ce["c"],VDialog:Ie["a"],VSlider:Li["a"],VSpacer:$["a"]});var Pi={components:{UsersRequestForm:Ei},data(){return{isEnableAcceptForm:!1,isEnableDenyForm:!1,infoToAcceptForm:{},loadingListRequest:!0,search:"",headers:[{text:"Name",align:"left",value:"name"},{text:"Actions",value:"action",sortable:!1,align:"center"}],usersRequest:[]}},created(){this.getRequestList()},computed:{userLogged(){return this.$store.state.session.user}},methods:{async confirmRequest(e){let t=this.usersRequest.indexOf(e);console.log(t,this.usersRequest[t].name);const a=this.usersRequest[t].name,i=this.usersRequest[t].uid,r=await this.userLogged.getNumberOfOccupiedParkingSpaces(),n=this.userLogged.parkingSpaces;this.infoToAcceptForm={userName:a,uid:i,numberOccupiedParking:r,totalParkingSpaces:Number(n)},console.log(this.infoToAcceptForm),this.isEnableAcceptForm=!0},denyRequest(e){let t=this.usersRequest.indexOf(e);console.log(t),this.isEnableDenyForm=!0},async getRequestList(){this.usersRequest=[],this.loadingListRequest=!0,await this.sleep(1500),await this.userLogged.getUsersRequest().then(e=>{for(const t of e){let e=new be({nick:void 0,name:void 0,lastName:void 0,country:void 0});e.getPersonalUserByUID(t.uid).then(e=>{this.usersRequest.push({name:e.name,uid:t.uid})})}}),this.loadingListRequest=!1},disableAcceptForm(){this.isEnableAcceptForm=!1,this.getRequestList()},sleep(e){return new Promise(t=>setTimeout(t,e))}}},Ai=Pi,$i=Object(v["a"])(Ai,Si,_i,!1,null,null,null),Ii=$i.exports;f()($i,{VBtn:E["a"],VCard:_e["a"],VCardTitle:Ce["c"],VContainer:Re["a"],VDataTable:Ca["a"],VSpacer:$["a"],VTextField:De["a"]});var Mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v("\n            User list containing your organization\n            "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{loading:e.loadingMemberList,"loading-text":"Loading... Please wait",headers:e.headers,items:e.usersList,search:e.search},scopedSlots:e._u([{key:"item.action",fn:function(t){var i=t.item;return[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.denyRequest(i)}}},[a("v-icon",[e._v("mdi-delete")])],1),a("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:function(t){return e.confirmRequest(i)}}},[a("v-icon",[e._v("mdi-pencil")])],1)]}}])})],1)],1)},Di=[],Bi={data(){return{isEnableAcceptForm:!1,isEnableDenyForm:!1,infoToAcceptForm:{},loadingMemberList:!0,search:"",headers:[{text:"Name",align:"left",value:"name"},{text:"ParkingSpaces",align:"left",value:"parkingSpaces"},{text:"Actions",value:"action",sortable:!1,align:"center"}],usersList:[]}},created(){this.getMemberList()},computed:{userLogged(){return this.$store.state.session.user}},methods:{async getMemberList(){this.usersList=[],this.loadingMemberList=!0,await this.sleep(1500),await this.userLogged.getMembers().then(e=>{for(const t of e){let e=new be({nick:void 0,name:void 0,lastName:void 0,country:void 0});e.getPersonalUserByUID(t.uid).then(e=>{this.usersList.push({name:e.name,uid:t.uid,parkingSpaces:t.parkingSpaces})})}}),this.loadingMemberList=!1},sleep(e){return new Promise(t=>setTimeout(t,e))}}},Ui=Bi,qi=Object(v["a"])(Ui,Mi,Di,!1,null,null,null),Gi=qi.exports;f()(qi,{VBtn:E["a"],VCard:_e["a"],VCardTitle:Ce["c"],VContainer:Re["a"],VDataTable:Ca["a"],VIcon:w["a"],VSpacer:$["a"],VTextField:De["a"]});var Hi={components:{UserRequestList:Ii,OrganizationList:Gi},data(){return{}},computed:{listenerHeight(){return.77*screen.height}},created(){this.setTopBarName("Manage Organization")},methods:{...Object(c["c"])("core",["setTopBarName"])}},Yi=Hi,Ji=Object(v["a"])(Yi,ji,Oi,!1,null,null,null),Xi=Ji.exports;f()(Ji,{VCard:_e["a"],VContainer:Re["a"],VIcon:w["a"],VTab:Ta["a"],VTabItem:Ra["a"],VTabs:za["a"]}),i["a"].use(ce["a"]);const Ki=new ce["a"]({mode:"history",base:"/",routes:[{path:"/",meta:{userRedirection:!0}},{path:"/register",name:"register",component:Dt},{path:"/login",name:"login",component:Yt},{path:"/actionController",name:"actionController",component:na},{path:"/emailVerification",name:"emailVerification",component:Qt},{path:"/dashboard",name:"dashboard",component:rt,meta:{userIsAuthenticated:!0}},{path:"/vehicules",name:"vehicules",component:Je,meta:{userIsAuthenticated:!0,isPersonalUser:!0}},{path:"/garaje",name:"garaje",component:Fi,meta:{userIsAuthenticated:!0,isPersonalUser:!0}},{path:"/ManageOrganization",name:"ManageCore",component:Xi,meta:{userIsAuthenticated:!0,isOrganizationUser:!0}}]});Ki.beforeEach((e,t,a)=>{if(e.matched.some(e=>e.meta.userIsAuthenticated)){let e=me.currentUser;e?"password"!=e.providerData[0].providerId||e.emailVerified?a():a({name:"emailVerification"}):a({name:"login"})}else if(e.matched.some(e=>e.meta.userRedirection)){let e=me.currentUser;a(e?{name:"dashboard"}:{name:"login"})}else a();e.matched.some(e=>e.meta.isPersonalUser)?"personalUser"==ke.state.session.userType?a():a({name:"dashboard"}):e.matched.some(e=>e.meta.isOrganizationUser)&&("organizationUser"==ke.state.session.userType?a():a({name:"dashboard"}))});var Wi=Ki,Zi=a("f309");i["a"].use(Zi["a"]);var Qi=new Zi["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#164E77",secondary:"#553f75",accent:"#82B1FF",error:"#e74a3b",info:"#36b9cc",success:"#1cc88a",warning:"#f6c23e"}}},icons:{iconfont:"mdi"}}),er=a("1dce"),tr=a.n(er);i["a"].config.productionTip=!1,i["a"].use(tr.a);let ar=null;function ir(){ar||(ar=new i["a"]({router:Wi,store:ke,vuetify:Qi,Vuelidate:tr.a,render:e=>e(se)}).$mount("#app"))}me.onAuthStateChanged(e=>{console.log("AUTH observer is called in main.js",e),e?ke.dispatch("session/userIsLogged",e.uid).then(()=>{ir()}):(ke.dispatch("session/signOut"),ir())})},5849:function(e,t,a){"use strict";var i=a("a319"),r=a.n(i);r.a},"5a79":function(e,t,a){"use strict";var i=a("0aa6"),r=a.n(i);r.a},"6ddb":function(e,t,a){},7092:function(e,t,a){},7094:function(e,t,a){"use strict";var i=a("74ac"),r=a.n(i);r.a},"74ac":function(e,t,a){},"845a":function(e,t,a){},"8e55":function(e,t,a){"use strict";var i=a("1d60"),r=a.n(i);r.a},9779:function(e,t,a){e.exports=a.p+"img/undraw_no_data_qbuo.134ace5d.svg"},a1f8:function(e,t,a){},a319:function(e,t,a){},a39a:function(e,t,a){"use strict";var i=a("7092"),r=a.n(i);r.a},bcf8:function(e,t,a){"use strict";var i=a("6ddb"),r=a.n(i);r.a},e82d:function(e,t,a){"use strict";var i=a("845a"),r=a.n(i);r.a},f9f8:function(e,t,a){e.exports=a.p+"img/undraw_Choose_bwbs.c8e3c584.svg"},fbf8:function(e,t,a){"use strict";var i=a("029b"),r=a.n(i);r.a}});
//# sourceMappingURL=app.d6ab1985.js.map